/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/product-image/route";
exports.ids = ["app/api/upload/product-image/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Fproduct-image%2Froute&page=%2Fapi%2Fupload%2Fproduct-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Fproduct-image%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Fproduct-image%2Froute&page=%2Fapi%2Fupload%2Fproduct-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Fproduct-image%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_pedrotorrezani_Documents_Programacao_atlas_src_app_api_upload_product_image_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/product-image/route.ts */ \"(rsc)/./src/app/api/upload/product-image/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/product-image/route\",\n        pathname: \"/api/upload/product-image\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/product-image/route\"\n    },\n    resolvedPagePath: \"/Users/pedrotorrezani/Documents/Programacao/atlas/src/app/api/upload/product-image/route.ts\",\n    nextConfigOutput,\n    userland: _Users_pedrotorrezani_Documents_Programacao_atlas_src_app_api_upload_product_image_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/product-image/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZwcm9kdWN0LWltYWdlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1cGxvYWQlMkZwcm9kdWN0LWltYWdlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXBsb2FkJTJGcHJvZHVjdC1pbWFnZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBlZHJvdG9ycmV6YW5pJTJGRG9jdW1lbnRzJTJGUHJvZ3JhbWFjYW8lMkZhdGxhcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwZWRyb3RvcnJlemFuaSUyRkRvY3VtZW50cyUyRlByb2dyYW1hY2FvJTJGYXRsYXMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzJDO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8/NTljZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcGVkcm90b3JyZXphbmkvRG9jdW1lbnRzL1Byb2dyYW1hY2FvL2F0bGFzL3NyYy9hcHAvYXBpL3VwbG9hZC9wcm9kdWN0LWltYWdlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGxvYWQvcHJvZHVjdC1pbWFnZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZC9wcm9kdWN0LWltYWdlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWQvcHJvZHVjdC1pbWFnZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9wZWRyb3RvcnJlemFuaS9Eb2N1bWVudHMvUHJvZ3JhbWFjYW8vYXRsYXMvc3JjL2FwcC9hcGkvdXBsb2FkL3Byb2R1Y3QtaW1hZ2Uvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9wcm9kdWN0LWltYWdlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Fproduct-image%2Froute&page=%2Fapi%2Fupload%2Fproduct-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Fproduct-image%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/product-image/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/upload/product-image/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _services_file_upload_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/file-upload.service */ \"(rsc)/./src/services/file-upload.service.ts\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n/**\n * Product Image Upload API Endpoint\n * \n * POST /api/upload/product-image\n * Handles product image uploads to Supabase Storage\n */ \n\n\nconst JWT_SECRET = \"ylewgpweougwepygweoigfwapefygweupfo9ig7wrqoFELDGSAYQWQO\";\nasync function validateToken(request) {\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return {\n                success: false,\n                error: \"Token n\\xe3o fornecido\"\n            };\n        }\n        const token = authHeader.substring(7);\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token, JWT_SECRET);\n        return {\n            success: true,\n            userId: decoded.userId\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: \"Token inv\\xe1lido\"\n        };\n    }\n}\nasync function POST(request) {\n    try {\n        console.log(\"=== UPLOAD API START ===\");\n        // 1. Authenticate user\n        const authResult = await validateToken(request);\n        if (!authResult.success) {\n            console.log(\"Auth failed:\", authResult.error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: authResult.error || \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const userId = authResult.userId;\n        console.log(\"User authenticated:\", userId);\n        // 2. Parse form data\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const companyId = formData.get(\"companyId\");\n        const productId = formData.get(\"productId\");\n        console.log(\"Form data:\", {\n            fileName: file?.name,\n            fileSize: file?.size,\n            fileType: file?.type,\n            companyId,\n            productId\n        });\n        // 3. Validate required fields\n        if (!file) {\n            console.log(\"No file provided\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No file provided\"\n            }, {\n                status: 400\n            });\n        }\n        if (!companyId) {\n            console.log(\"No company ID provided\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Company ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!productId) {\n            console.log(\"No product ID provided\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Product ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // 4. Upload file using service\n        console.log(\"Creating file upload service...\");\n        const fileUploadService = (0,_services_file_upload_service__WEBPACK_IMPORTED_MODULE_1__.createFileUploadService)();\n        console.log(\"Uploading file...\");\n        const imageUrl = await fileUploadService.uploadProductImage(file, userId, companyId, productId);\n        console.log(\"Upload successful:\", imageUrl);\n        // 5. Return success response\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            imageUrl,\n            message: \"Image uploaded successfully\"\n        });\n    } catch (error) {\n        console.error(\"Upload API error:\", error);\n        // Log detailed error info\n        console.error(\"Error details:\", {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Failed to upload image\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        // 1. Authenticate user\n        const authResult = await validateToken(request);\n        if (!authResult.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: authResult.error || \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // 2. Parse request body\n        const { imageUrl } = await request.json();\n        if (!imageUrl) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Image URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        // 3. Delete file using service\n        const fileUploadService = (0,_services_file_upload_service__WEBPACK_IMPORTED_MODULE_1__.createFileUploadService)();\n        await fileUploadService.deleteProductImage(imageUrl);\n        // 4. Return success response\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Image deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Delete API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Failed to delete image\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91cGxvYWQvcHJvZHVjdC1pbWFnZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUV1RDtBQUNpQjtBQUMxQztBQUUvQixNQUFNRyxhQUFhQyx5REFBc0I7QUFTekMsZUFBZUUsY0FBY0MsT0FBb0I7SUFDL0MsSUFBSTtRQUNGLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBRXZDLElBQUksQ0FBQ0YsY0FBYyxDQUFDQSxXQUFXRyxVQUFVLENBQUMsWUFBWTtZQUNwRCxPQUFPO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQXNCO1FBQ3hEO1FBRUEsTUFBTUMsUUFBUU4sV0FBV08sU0FBUyxDQUFDO1FBQ25DLE1BQU1DLFVBQVVkLDBEQUFVLENBQUNZLE9BQU9YO1FBRWxDLE9BQU87WUFBRVMsU0FBUztZQUFNTSxRQUFRRixRQUFRRSxNQUFNO1FBQUM7SUFDakQsRUFBRSxPQUFPTCxPQUFPO1FBQ2QsT0FBTztZQUFFRCxTQUFTO1lBQU9DLE9BQU87UUFBaUI7SUFDbkQ7QUFDRjtBQUVPLGVBQWVNLEtBQUtaLE9BQW9CO0lBQzdDLElBQUk7UUFDRmEsUUFBUUMsR0FBRyxDQUFDO1FBRVosdUJBQXVCO1FBQ3ZCLE1BQU1DLGFBQWEsTUFBTWhCLGNBQWNDO1FBQ3ZDLElBQUksQ0FBQ2UsV0FBV1YsT0FBTyxFQUFFO1lBQ3ZCUSxRQUFRQyxHQUFHLENBQUMsZ0JBQWdCQyxXQUFXVCxLQUFLO1lBQzVDLE9BQU9iLHFEQUFZQSxDQUFDdUIsSUFBSSxDQUN0QjtnQkFBRVgsU0FBUztnQkFBT0MsT0FBT1MsV0FBV1QsS0FBSyxJQUFJO1lBQWUsR0FDNUQ7Z0JBQUVXLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1OLFNBQVNJLFdBQVdKLE1BQU07UUFDaENFLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJIO1FBRW5DLHFCQUFxQjtRQUNyQixNQUFNTyxXQUFXLE1BQU1sQixRQUFR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QUssQ0FBQyxxQkFBcUJBO1FBRW5DLE9BQU9iLHFEQUFZQSxDQUFDdUIsSUFBSSxDQUN0QjtZQUNFWCxTQUFTO1lBQ1RDLE9BQU9BLE1BQU15QixPQUFPLElBQUk7UUFDMUIsR0FDQTtZQUFFZCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2F0bGFzLWF1dGgvLi9zcmMvYXBwL2FwaS91cGxvYWQvcHJvZHVjdC1pbWFnZS9yb3V0ZS50cz84ZTlmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvZHVjdCBJbWFnZSBVcGxvYWQgQVBJIEVuZHBvaW50XG4gKiBcbiAqIFBPU1QgL2FwaS91cGxvYWQvcHJvZHVjdC1pbWFnZVxuICogSGFuZGxlcyBwcm9kdWN0IGltYWdlIHVwbG9hZHMgdG8gU3VwYWJhc2UgU3RvcmFnZVxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVGaWxlVXBsb2FkU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvZmlsZS11cGxvYWQuc2VydmljZSc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUITtcblxuaW50ZXJmYWNlIEpXVFBheWxvYWQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgaWF0OiBudW1iZXI7XG4gIGV4cDogbnVtYmVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVRva2VuKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHVzZXJJZD86IHN0cmluZzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgXG4gICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVG9rZW4gbsOjbyBmb3JuZWNpZG8nIH07XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KTtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgSldUUGF5bG9hZDtcbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VySWQ6IGRlY29kZWQudXNlcklkIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVG9rZW4gaW52w6FsaWRvJyB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJz09PSBVUExPQUQgQVBJIFNUQVJUID09PScpO1xuICAgIFxuICAgIC8vIDEuIEF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlVG9rZW4ocmVxdWVzdCk7XG4gICAgaWYgKCFhdXRoUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIGZhaWxlZDonLCBhdXRoUmVzdWx0LmVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGF1dGhSZXN1bHQuZXJyb3IgfHwgJ1VuYXV0aG9yaXplZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJJZCA9IGF1dGhSZXN1bHQudXNlcklkITtcbiAgICBjb25zb2xlLmxvZygnVXNlciBhdXRoZW50aWNhdGVkOicsIHVzZXJJZCk7XG5cbiAgICAvLyAyLiBQYXJzZSBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdmaWxlJykgYXMgRmlsZTtcbiAgICBjb25zdCBjb21wYW55SWQgPSBmb3JtRGF0YS5nZXQoJ2NvbXBhbnlJZCcpIGFzIHN0cmluZztcbiAgICBjb25zdCBwcm9kdWN0SWQgPSBmb3JtRGF0YS5nZXQoJ3Byb2R1Y3RJZCcpIGFzIHN0cmluZztcblxuICAgIGNvbnNvbGUubG9nKCdGb3JtIGRhdGE6Jywge1xuICAgICAgZmlsZU5hbWU6IGZpbGU/Lm5hbWUsXG4gICAgICBmaWxlU2l6ZTogZmlsZT8uc2l6ZSxcbiAgICAgIGZpbGVUeXBlOiBmaWxlPy50eXBlLFxuICAgICAgY29tcGFueUlkLFxuICAgICAgcHJvZHVjdElkXG4gICAgfSk7XG5cbiAgICAvLyAzLiBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBmaWxlIHByb3ZpZGVkJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gZmlsZSBwcm92aWRlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghY29tcGFueUlkKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY29tcGFueSBJRCBwcm92aWRlZCcpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NvbXBhbnkgSUQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIXByb2R1Y3RJZCkge1xuICAgICAgY29uc29sZS5sb2coJ05vIHByb2R1Y3QgSUQgcHJvdmlkZWQnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQcm9kdWN0IElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gNC4gVXBsb2FkIGZpbGUgdXNpbmcgc2VydmljZVxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBmaWxlIHVwbG9hZCBzZXJ2aWNlLi4uJyk7XG4gICAgY29uc3QgZmlsZVVwbG9hZFNlcnZpY2UgPSBjcmVhdGVGaWxlVXBsb2FkU2VydmljZSgpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdVcGxvYWRpbmcgZmlsZS4uLicpO1xuICAgIGNvbnN0IGltYWdlVXJsID0gYXdhaXQgZmlsZVVwbG9hZFNlcnZpY2UudXBsb2FkUHJvZHVjdEltYWdlKFxuICAgICAgZmlsZSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNvbXBhbnlJZCxcbiAgICAgIHByb2R1Y3RJZFxuICAgICk7XG5cbiAgICBjb25zb2xlLmxvZygnVXBsb2FkIHN1Y2Nlc3NmdWw6JywgaW1hZ2VVcmwpO1xuXG4gICAgLy8gNS4gUmV0dXJuIHN1Y2Nlc3MgcmVzcG9uc2VcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGltYWdlVXJsLFxuICAgICAgbWVzc2FnZTogJ0ltYWdlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseSdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gTG9nIGRldGFpbGVkIGVycm9yIGluZm9cbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwbG9hZCBpbWFnZScgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gQXV0aGVudGljYXRlIHVzZXJcbiAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVUb2tlbihyZXF1ZXN0KTtcbiAgICBpZiAoIWF1dGhSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYXV0aFJlc3VsdC5lcnJvciB8fCAnVW5hdXRob3JpemVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gMi4gUGFyc2UgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgeyBpbWFnZVVybCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBpZiAoIWltYWdlVXJsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW1hZ2UgVVJMIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gMy4gRGVsZXRlIGZpbGUgdXNpbmcgc2VydmljZVxuICAgIGNvbnN0IGZpbGVVcGxvYWRTZXJ2aWNlID0gY3JlYXRlRmlsZVVwbG9hZFNlcnZpY2UoKTtcbiAgICBhd2FpdCBmaWxlVXBsb2FkU2VydmljZS5kZWxldGVQcm9kdWN0SW1hZ2UoaW1hZ2VVcmwpO1xuXG4gICAgLy8gNC4gUmV0dXJuIHN1Y2Nlc3MgcmVzcG9uc2VcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdJbWFnZSBkZWxldGVkIHN1Y2Nlc3NmdWxseSdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRGVsZXRlIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGRlbGV0ZSBpbWFnZScgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVGaWxlVXBsb2FkU2VydmljZSIsImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwidmFsaWRhdGVUb2tlbiIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJzdWNjZXNzIiwiZXJyb3IiLCJ0b2tlbiIsInN1YnN0cmluZyIsImRlY29kZWQiLCJ2ZXJpZnkiLCJ1c2VySWQiLCJQT1NUIiwiY29uc29sZSIsImxvZyIsImF1dGhSZXN1bHQiLCJqc29uIiwic3RhdHVzIiwiZm9ybURhdGEiLCJmaWxlIiwiY29tcGFueUlkIiwicHJvZHVjdElkIiwiZmlsZU5hbWUiLCJuYW1lIiwiZmlsZVNpemUiLCJzaXplIiwiZmlsZVR5cGUiLCJ0eXBlIiwiZmlsZVVwbG9hZFNlcnZpY2UiLCJpbWFnZVVybCIsInVwbG9hZFByb2R1Y3RJbWFnZSIsIm1lc3NhZ2UiLCJzdGFjayIsIkRFTEVURSIsImRlbGV0ZVByb2R1Y3RJbWFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/product-image/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   databaseService: () => (/* binding */ databaseService)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://bxhgjurnibfcbcxqxmsb.supabase.co\";\nconst supabaseServiceKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4aGdqdXJuaWJmY2JjeHF4bXNiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTM4MTQzMCwiZXhwIjoyMDY2OTU3NDMwfQ.ISSpFu9T01tI4EWIAbgNrjhr6sYnQbjrHliW7d1XrMA\";\nclass DatabaseService {\n    constructor(){\n        this.supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n    }\n    async query(text, params) {\n        try {\n            const { data, error } = await this.supabase.rpc(\"execute_sql\", {\n                query: text,\n                parameters: params || []\n            });\n            if (error) {\n                throw new Error(`Database query error: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Database query error:\", error);\n            throw error;\n        }\n    }\n    async queryOne(text, params) {\n        const results = await this.query(text, params);\n        return results.length > 0 ? results[0] : null;\n    }\n    async transaction(callback) {\n        return callback(this.supabase);\n    }\n    getClient() {\n        return this.supabase;\n    }\n}\nconst databaseService = new DatabaseService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBR3JELE1BQU1DLGNBQWNDLDBDQUF3QjtBQUM1QyxNQUFNRyxxQkFBcUJILDZOQUFxQztBQUVoRSxNQUFNSztJQUdKQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxRQUFRLEdBQUdULG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBb0I7WUFDNURLLE1BQU07Z0JBQ0pDLGtCQUFrQjtnQkFDbEJDLGdCQUFnQjtZQUNsQjtRQUNGO0lBQ0Y7SUFHQSxNQUFNQyxNQUFTQyxJQUFZLEVBQUVDLE1BQWMsRUFBZ0I7UUFDekQsSUFBSTtZQUNGLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQ1IsUUFBUSxDQUFDUyxHQUFHLENBQUMsZUFBZTtnQkFDN0RMLE9BQU9DO2dCQUNQSyxZQUFZSixVQUFVLEVBQUU7WUFDMUI7WUFFQSxJQUFJRSxPQUFPO2dCQUNULE1BQU0sSUFBSUcsTUFBTSxDQUFDLHNCQUFzQixFQUFFSCxNQUFNSSxPQUFPLENBQUMsQ0FBQztZQUMxRDtZQUVBLE9BQU9MLFFBQVEsRUFBRTtRQUNuQixFQUFFLE9BQU9DLE9BQU87WUFDZEssUUFBUUwsS0FBSyxDQUFDLHlCQUF5QkE7WUFDdkMsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTU0sU0FBWVQsSUFBWSxFQUFFQyxNQUFjLEVBQXFCO1FBQ2pFLE1BQU1TLFVBQVUsTUFBTSxJQUFJLENBQUNYLEtBQUssQ0FBSUMsTUFBTUM7UUFDMUMsT0FBT1MsUUFBUUMsTUFBTSxHQUFHLElBQUlELE9BQU8sQ0FBQyxFQUFFLEdBQUc7SUFDM0M7SUFFQSxNQUFNRSxZQUFlQyxRQUFxQyxFQUFjO1FBQ3RFLE9BQU9BLFNBQVMsSUFBSSxDQUFDbEIsUUFBUTtJQUMvQjtJQUVBbUIsWUFBWTtRQUNWLE9BQU8sSUFBSSxDQUFDbkIsUUFBUTtJQUN0QjtBQUNGO0FBRU8sTUFBTW9CLGtCQUFrQixJQUFJdEIsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8uL3NyYy9saWIvZGF0YWJhc2UudHM/YzFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgSURhdGFiYXNlU2VydmljZSB9IGZyb20gJ0AvdHlwZXMvc2VydmljZXMnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZITtcblxuY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIGltcGxlbWVudHMgSURhdGFiYXNlU2VydmljZSB7XG4gIHByaXZhdGUgc3VwYWJhc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XG4gICAgICBhdXRoOiB7XG4gICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgYXN5bmMgcXVlcnk8VD4odGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSk6IFByb21pc2U8VFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2UucnBjKCdleGVjdXRlX3NxbCcsIHtcbiAgICAgICAgcXVlcnk6IHRleHQsXG4gICAgICAgIHBhcmFtZXRlcnM6IHBhcmFtcyB8fCBbXVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGFiYXNlIHF1ZXJ5IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWVyeU9uZTxUPih0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnF1ZXJ5PFQ+KHRleHQsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF0gOiBudWxsO1xuICB9XG5cbiAgYXN5bmMgdHJhbnNhY3Rpb248VD4oY2FsbGJhY2s6IChjbGllbnQ6IGFueSkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBjYWxsYmFjayh0aGlzLnN1cGFiYXNlKTtcbiAgfVxuXG4gIGdldENsaWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdXBhYmFzZTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGF0YWJhc2VTZXJ2aWNlID0gbmV3IERhdGFiYXNlU2VydmljZSgpOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiRGF0YWJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJzdXBhYmFzZSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJkYXRhIiwiZXJyb3IiLCJycGMiLCJwYXJhbWV0ZXJzIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsInF1ZXJ5T25lIiwicmVzdWx0cyIsImxlbmd0aCIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJnZXRDbGllbnQiLCJkYXRhYmFzZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/file-utils.ts":
/*!*************************************!*\
  !*** ./src/lib/utils/file-utils.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createThumbnailFileName: () => (/* binding */ createThumbnailFileName),\n/* harmony export */   extractCompanyIdFromPath: () => (/* binding */ extractCompanyIdFromPath),\n/* harmony export */   extractProductIdFromPath: () => (/* binding */ extractProductIdFromPath),\n/* harmony export */   extractUserIdFromPath: () => (/* binding */ extractUserIdFromPath),\n/* harmony export */   formatFileSize: () => (/* binding */ formatFileSize),\n/* harmony export */   generateUniqueFileName: () => (/* binding */ generateUniqueFileName),\n/* harmony export */   getFileExtension: () => (/* binding */ getFileExtension),\n/* harmony export */   getMimeTypeFromExtension: () => (/* binding */ getMimeTypeFromExtension),\n/* harmony export */   isImageFile: () => (/* binding */ isImageFile),\n/* harmony export */   optimizeImageFile: () => (/* binding */ optimizeImageFile),\n/* harmony export */   removeFileExtension: () => (/* binding */ removeFileExtension),\n/* harmony export */   sanitizeFileName: () => (/* binding */ sanitizeFileName),\n/* harmony export */   validateImageFile: () => (/* binding */ validateImageFile)\n/* harmony export */ });\n/**\n * File Utilities\n * \n * Collection of utility functions for file handling\n * Includes validation, optimization, and naming utilities\n */ /**\n * Validate image file\n */ function validateImageFile(file, maxSizeBytes, allowedFormats) {\n    // Check file size\n    if (file.size > maxSizeBytes) {\n        const maxSizeMB = maxSizeBytes / (1024 * 1024);\n        return `Arquivo ${file.name} excede ${maxSizeMB}MB`;\n    }\n    // Check file type\n    if (!allowedFormats.includes(file.type)) {\n        const allowedExtensions = allowedFormats.map((f)=>f.split(\"/\")[1].toUpperCase()).join(\", \");\n        return `Formato de ${file.name} não suportado. Formatos aceitos: ${allowedExtensions}`;\n    }\n    // Check if file is actually an image by trying to read it\n    if (!file.type.startsWith(\"image/\")) {\n        return `${file.name} não é um arquivo de imagem válido`;\n    }\n    return null; // Valid file\n}\n/**\n * Generate unique filename to avoid collisions\n */ function generateUniqueFileName(originalName) {\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substring(2);\n    const extension = getFileExtension(originalName);\n    const nameWithoutExt = removeFileExtension(originalName);\n    // Sanitize filename\n    const sanitizedName = sanitizeFileName(nameWithoutExt);\n    return `${sanitizedName}_${timestamp}_${random}.${extension}`;\n}\n/**\n * Optimize image file (compress if needed)\n */ async function optimizeImageFile(file) {\n    // For now, return the original file\n    // In the future, we can add image compression here\n    return file;\n// TODO: Implement image compression using canvas or a library like 'browser-image-compression'\n// Example implementation:\n/*\n  if (file.size > 1024 * 1024) { // If larger than 1MB\n    const compressed = await imageCompression(file, {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1920,\n      useWebWorker: true\n    });\n    return compressed;\n  }\n  return file;\n  */ }\n/**\n * Get file extension from filename\n */ function getFileExtension(filename) {\n    const lastDot = filename.lastIndexOf(\".\");\n    return lastDot === -1 ? \"\" : filename.substring(lastDot + 1).toLowerCase();\n}\n/**\n * Remove file extension from filename\n */ function removeFileExtension(filename) {\n    const lastDot = filename.lastIndexOf(\".\");\n    return lastDot === -1 ? filename : filename.substring(0, lastDot);\n}\n/**\n * Sanitize filename for safe storage\n */ function sanitizeFileName(filename) {\n    return filename.toLowerCase().replace(/[^a-z0-9.\\-_]/g, \"_\") // Replace invalid chars with underscore\n    .replace(/_{2,}/g, \"_\") // Replace multiple underscores with single\n    .replace(/^_|_$/g, \"\") // Remove leading/trailing underscores\n    .substring(0, 50); // Limit length\n}\n/**\n * Format file size for display\n */ function formatFileSize(bytes) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\n        \"Bytes\",\n        \"KB\",\n        \"MB\",\n        \"GB\"\n    ];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\n/**\n * Get MIME type from file extension\n */ function getMimeTypeFromExtension(extension) {\n    const mimeTypes = {\n        \"jpg\": \"image/jpeg\",\n        \"jpeg\": \"image/jpeg\",\n        \"png\": \"image/png\",\n        \"webp\": \"image/webp\",\n        \"gif\": \"image/gif\",\n        \"svg\": \"image/svg+xml\"\n    };\n    return mimeTypes[extension.toLowerCase()] || \"application/octet-stream\";\n}\n/**\n * Check if file is an image by extension\n */ function isImageFile(filename) {\n    const extension = getFileExtension(filename);\n    const imageExtensions = [\n        \"jpg\",\n        \"jpeg\",\n        \"png\",\n        \"webp\",\n        \"gif\",\n        \"svg\"\n    ];\n    return imageExtensions.includes(extension);\n}\n/**\n * Create thumbnail filename from original filename\n */ function createThumbnailFileName(originalFileName) {\n    const nameWithoutExt = removeFileExtension(originalFileName);\n    const extension = getFileExtension(originalFileName);\n    return `${nameWithoutExt}_thumb.${extension}`;\n}\n/**\n * Extract product ID from image path\n * Example: \"user123/company456/products/product789/images/image.jpg\" -> \"product789\"\n */ function extractProductIdFromPath(imagePath) {\n    const match = imagePath.match(/\\/products\\/([^\\/]+)/);\n    return match ? match[1] : null;\n}\n/**\n * Extract user ID from image path\n */ function extractUserIdFromPath(imagePath) {\n    const parts = imagePath.split(\"/\");\n    return parts.length > 0 ? parts[0] : null;\n}\n/**\n * Extract company ID from image path\n */ function extractCompanyIdFromPath(imagePath) {\n    const parts = imagePath.split(\"/\");\n    return parts.length > 1 ? parts[1] : null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUssQ0FBQztJQUM5QixPQUFPNkMsTUFBTUMsTUFBTSxHQUFHLElBQUlELEtBQUssQ0FBQyxFQUFFLEdBQUc7QUFDdkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdGxhcy1hdXRoLy4vc3JjL2xpYi91dGlscy9maWxlLXV0aWxzLnRzPzQwMWMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaWxlIFV0aWxpdGllc1xuICogXG4gKiBDb2xsZWN0aW9uIG9mIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBmaWxlIGhhbmRsaW5nXG4gKiBJbmNsdWRlcyB2YWxpZGF0aW9uLCBvcHRpbWl6YXRpb24sIGFuZCBuYW1pbmcgdXRpbGl0aWVzXG4gKi9cblxuLyoqXG4gKiBWYWxpZGF0ZSBpbWFnZSBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUltYWdlRmlsZShcbiAgZmlsZTogRmlsZSxcbiAgbWF4U2l6ZUJ5dGVzOiBudW1iZXIsXG4gIGFsbG93ZWRGb3JtYXRzOiBzdHJpbmdbXVxuKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIENoZWNrIGZpbGUgc2l6ZVxuICBpZiAoZmlsZS5zaXplID4gbWF4U2l6ZUJ5dGVzKSB7XG4gICAgY29uc3QgbWF4U2l6ZU1CID0gbWF4U2l6ZUJ5dGVzIC8gKDEwMjQgKiAxMDI0KTtcbiAgICByZXR1cm4gYEFycXVpdm8gJHtmaWxlLm5hbWV9IGV4Y2VkZSAke21heFNpemVNQn1NQmA7XG4gIH1cblxuICAvLyBDaGVjayBmaWxlIHR5cGVcbiAgaWYgKCFhbGxvd2VkRm9ybWF0cy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XG4gICAgY29uc3QgYWxsb3dlZEV4dGVuc2lvbnMgPSBhbGxvd2VkRm9ybWF0cy5tYXAoZiA9PiBmLnNwbGl0KCcvJylbMV0udG9VcHBlckNhc2UoKSkuam9pbignLCAnKTtcbiAgICByZXR1cm4gYEZvcm1hdG8gZGUgJHtmaWxlLm5hbWV9IG7Do28gc3Vwb3J0YWRvLiBGb3JtYXRvcyBhY2VpdG9zOiAke2FsbG93ZWRFeHRlbnNpb25zfWA7XG4gIH1cblxuICAvLyBDaGVjayBpZiBmaWxlIGlzIGFjdHVhbGx5IGFuIGltYWdlIGJ5IHRyeWluZyB0byByZWFkIGl0XG4gIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgcmV0dXJuIGAke2ZpbGUubmFtZX0gbsOjbyDDqSB1bSBhcnF1aXZvIGRlIGltYWdlbSB2w6FsaWRvYDtcbiAgfVxuXG4gIHJldHVybiBudWxsOyAvLyBWYWxpZCBmaWxlXG59XG5cbi8qKlxuICogR2VuZXJhdGUgdW5pcXVlIGZpbGVuYW1lIHRvIGF2b2lkIGNvbGxpc2lvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlRmlsZU5hbWUob3JpZ2luYWxOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG4gIGNvbnN0IGV4dGVuc2lvbiA9IGdldEZpbGVFeHRlbnNpb24ob3JpZ2luYWxOYW1lKTtcbiAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSByZW1vdmVGaWxlRXh0ZW5zaW9uKG9yaWdpbmFsTmFtZSk7XG4gIFxuICAvLyBTYW5pdGl6ZSBmaWxlbmFtZVxuICBjb25zdCBzYW5pdGl6ZWROYW1lID0gc2FuaXRpemVGaWxlTmFtZShuYW1lV2l0aG91dEV4dCk7XG4gIFxuICByZXR1cm4gYCR7c2FuaXRpemVkTmFtZX1fJHt0aW1lc3RhbXB9XyR7cmFuZG9tfS4ke2V4dGVuc2lvbn1gO1xufVxuXG4vKipcbiAqIE9wdGltaXplIGltYWdlIGZpbGUgKGNvbXByZXNzIGlmIG5lZWRlZClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wdGltaXplSW1hZ2VGaWxlKGZpbGU6IEZpbGUpOiBQcm9taXNlPEZpbGU+IHtcbiAgLy8gRm9yIG5vdywgcmV0dXJuIHRoZSBvcmlnaW5hbCBmaWxlXG4gIC8vIEluIHRoZSBmdXR1cmUsIHdlIGNhbiBhZGQgaW1hZ2UgY29tcHJlc3Npb24gaGVyZVxuICByZXR1cm4gZmlsZTtcbiAgXG4gIC8vIFRPRE86IEltcGxlbWVudCBpbWFnZSBjb21wcmVzc2lvbiB1c2luZyBjYW52YXMgb3IgYSBsaWJyYXJ5IGxpa2UgJ2Jyb3dzZXItaW1hZ2UtY29tcHJlc3Npb24nXG4gIC8vIEV4YW1wbGUgaW1wbGVtZW50YXRpb246XG4gIC8qXG4gIGlmIChmaWxlLnNpemUgPiAxMDI0ICogMTAyNCkgeyAvLyBJZiBsYXJnZXIgdGhhbiAxTUJcbiAgICBjb25zdCBjb21wcmVzc2VkID0gYXdhaXQgaW1hZ2VDb21wcmVzc2lvbihmaWxlLCB7XG4gICAgICBtYXhTaXplTUI6IDEsXG4gICAgICBtYXhXaWR0aE9ySGVpZ2h0OiAxOTIwLFxuICAgICAgdXNlV2ViV29ya2VyOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbXByZXNzZWQ7XG4gIH1cbiAgcmV0dXJuIGZpbGU7XG4gICovXG59XG5cbi8qKlxuICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gZmlsZW5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24oZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxhc3REb3QgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpO1xuICByZXR1cm4gbGFzdERvdCA9PT0gLTEgPyAnJyA6IGZpbGVuYW1lLnN1YnN0cmluZyhsYXN0RG90ICsgMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZmlsZSBleHRlbnNpb24gZnJvbSBmaWxlbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsZUV4dGVuc2lvbihmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbGFzdERvdCA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gIHJldHVybiBsYXN0RG90ID09PSAtMSA/IGZpbGVuYW1lIDogZmlsZW5hbWUuc3Vic3RyaW5nKDAsIGxhc3REb3QpO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGZpbGVuYW1lIGZvciBzYWZlIHN0b3JhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBmaWxlbmFtZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1teYS16MC05LlxcLV9dL2csICdfJykgLy8gUmVwbGFjZSBpbnZhbGlkIGNoYXJzIHdpdGggdW5kZXJzY29yZVxuICAgIC5yZXBsYWNlKC9fezIsfS9nLCAnXycpIC8vIFJlcGxhY2UgbXVsdGlwbGUgdW5kZXJzY29yZXMgd2l0aCBzaW5nbGVcbiAgICAucmVwbGFjZSgvXl98XyQvZywgJycpIC8vIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHVuZGVyc2NvcmVzXG4gICAgLnN1YnN0cmluZygwLCA1MCk7IC8vIExpbWl0IGxlbmd0aFxufVxuXG4vKipcbiAqIEZvcm1hdCBmaWxlIHNpemUgZm9yIGRpc3BsYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCeXRlcyc7XG4gIFxuICBjb25zdCBrID0gMTAyNDtcbiAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJ107XG4gIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcbiAgXG4gIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDIpKSArICcgJyArIHNpemVzW2ldO1xufVxuXG4vKipcbiAqIEdldCBNSU1FIHR5cGUgZnJvbSBmaWxlIGV4dGVuc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWltZVR5cGVGcm9tRXh0ZW5zaW9uKGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbWltZVR5cGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdqcGcnOiAnaW1hZ2UvanBlZycsXG4gICAgJ2pwZWcnOiAnaW1hZ2UvanBlZycsXG4gICAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxuICAgICd3ZWJwJzogJ2ltYWdlL3dlYnAnLFxuICAgICdnaWYnOiAnaW1hZ2UvZ2lmJyxcbiAgICAnc3ZnJzogJ2ltYWdlL3N2Zyt4bWwnXG4gIH07XG4gIFxuICByZXR1cm4gbWltZVR5cGVzW2V4dGVuc2lvbi50b0xvd2VyQ2FzZSgpXSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBmaWxlIGlzIGFuIGltYWdlIGJ5IGV4dGVuc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbWFnZUZpbGUoZmlsZW5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBleHRlbnNpb24gPSBnZXRGaWxlRXh0ZW5zaW9uKGZpbGVuYW1lKTtcbiAgY29uc3QgaW1hZ2VFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCAnd2VicCcsICdnaWYnLCAnc3ZnJ107XG4gIHJldHVybiBpbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgdGh1bWJuYWlsIGZpbGVuYW1lIGZyb20gb3JpZ2luYWwgZmlsZW5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRodW1ibmFpbEZpbGVOYW1lKG9yaWdpbmFsRmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG5hbWVXaXRob3V0RXh0ID0gcmVtb3ZlRmlsZUV4dGVuc2lvbihvcmlnaW5hbEZpbGVOYW1lKTtcbiAgY29uc3QgZXh0ZW5zaW9uID0gZ2V0RmlsZUV4dGVuc2lvbihvcmlnaW5hbEZpbGVOYW1lKTtcbiAgXG4gIHJldHVybiBgJHtuYW1lV2l0aG91dEV4dH1fdGh1bWIuJHtleHRlbnNpb259YDtcbn1cblxuLyoqXG4gKiBFeHRyYWN0IHByb2R1Y3QgSUQgZnJvbSBpbWFnZSBwYXRoXG4gKiBFeGFtcGxlOiBcInVzZXIxMjMvY29tcGFueTQ1Ni9wcm9kdWN0cy9wcm9kdWN0Nzg5L2ltYWdlcy9pbWFnZS5qcGdcIiAtPiBcInByb2R1Y3Q3ODlcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFByb2R1Y3RJZEZyb21QYXRoKGltYWdlUGF0aDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IG1hdGNoID0gaW1hZ2VQYXRoLm1hdGNoKC9cXC9wcm9kdWN0c1xcLyhbXlxcL10rKS8pO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XG59XG5cbi8qKlxuICogRXh0cmFjdCB1c2VyIElEIGZyb20gaW1hZ2UgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFVzZXJJZEZyb21QYXRoKGltYWdlUGF0aDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHBhcnRzID0gaW1hZ2VQYXRoLnNwbGl0KCcvJyk7XG4gIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHNbMF0gOiBudWxsO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgY29tcGFueSBJRCBmcm9tIGltYWdlIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RDb21wYW55SWRGcm9tUGF0aChpbWFnZVBhdGg6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBwYXJ0cyA9IGltYWdlUGF0aC5zcGxpdCgnLycpO1xuICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzWzFdIDogbnVsbDtcbn0iXSwibmFtZXMiOlsidmFsaWRhdGVJbWFnZUZpbGUiLCJmaWxlIiwibWF4U2l6ZUJ5dGVzIiwiYWxsb3dlZEZvcm1hdHMiLCJzaXplIiwibWF4U2l6ZU1CIiwibmFtZSIsImluY2x1ZGVzIiwidHlwZSIsImFsbG93ZWRFeHRlbnNpb25zIiwibWFwIiwiZiIsInNwbGl0IiwidG9VcHBlckNhc2UiLCJqb2luIiwic3RhcnRzV2l0aCIsImdlbmVyYXRlVW5pcXVlRmlsZU5hbWUiLCJvcmlnaW5hbE5hbWUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmFuZG9tIiwiTWF0aCIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZXh0ZW5zaW9uIiwiZ2V0RmlsZUV4dGVuc2lvbiIsIm5hbWVXaXRob3V0RXh0IiwicmVtb3ZlRmlsZUV4dGVuc2lvbiIsInNhbml0aXplZE5hbWUiLCJzYW5pdGl6ZUZpbGVOYW1lIiwib3B0aW1pemVJbWFnZUZpbGUiLCJmaWxlbmFtZSIsImxhc3REb3QiLCJsYXN0SW5kZXhPZiIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJpIiwiZmxvb3IiLCJsb2ciLCJwYXJzZUZsb2F0IiwicG93IiwidG9GaXhlZCIsImdldE1pbWVUeXBlRnJvbUV4dGVuc2lvbiIsIm1pbWVUeXBlcyIsImlzSW1hZ2VGaWxlIiwiaW1hZ2VFeHRlbnNpb25zIiwiY3JlYXRlVGh1bWJuYWlsRmlsZU5hbWUiLCJvcmlnaW5hbEZpbGVOYW1lIiwiZXh0cmFjdFByb2R1Y3RJZEZyb21QYXRoIiwiaW1hZ2VQYXRoIiwibWF0Y2giLCJleHRyYWN0VXNlcklkRnJvbVBhdGgiLCJwYXJ0cyIsImxlbmd0aCIsImV4dHJhY3RDb21wYW55SWRGcm9tUGF0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/file-utils.ts\n");

/***/ }),

/***/ "(rsc)/./src/repositories/supabase-storage.repository.ts":
/*!*********************************************************!*\
  !*** ./src/repositories/supabase-storage.repository.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseStorageRepository: () => (/* binding */ SupabaseStorageRepository)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./src/lib/database.ts\");\n/**\n * Supabase Storage Repository\n * \n * Implements Repository Pattern for Supabase Storage operations\n * Abstraction layer between service and Supabase SDK\n */ \nclass SupabaseStorageRepository {\n    get client() {\n        return _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n    }\n    /**\n   * Upload file to Supabase Storage\n   * Returns the public URL of the uploaded file\n   */ async upload(bucket, path, file) {\n        try {\n            // Upload file to Supabase Storage\n            const { data, error } = await this.client.storage.from(bucket).upload(path, file, {\n                cacheControl: \"3600\",\n                upsert: false // Don't overwrite existing files\n            });\n            if (error) {\n                throw new Error(`Upload failed: ${error.message}`);\n            }\n            // Get public URL\n            const publicUrl = this.getPublicUrl(bucket, path);\n            return publicUrl;\n        } catch (error) {\n            console.error(\"Storage upload error:\", error);\n            throw new Error(`Failed to upload file: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    /**\n   * Delete file from Supabase Storage\n   */ async delete(bucket, path) {\n        try {\n            const { error } = await this.client.storage.from(bucket).remove([\n                path\n            ]);\n            if (error) {\n                throw new Error(`Delete failed: ${error.message}`);\n            }\n        } catch (error) {\n            console.error(\"Storage delete error:\", error);\n            throw new Error(`Failed to delete file: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    /**\n   * List files in a specific folder/prefix\n   * Returns array of public URLs\n   */ async list(bucket, prefix) {\n        try {\n            const { data, error } = await this.client.storage.from(bucket).list(prefix, {\n                limit: 100,\n                sortBy: {\n                    column: \"created_at\",\n                    order: \"desc\"\n                }\n            });\n            if (error) {\n                throw new Error(`List failed: ${error.message}`);\n            }\n            // Convert to public URLs\n            return data.filter((file)=>file.name && !file.name.endsWith(\"/\")) // Filter out folders\n            .map((file)=>this.getPublicUrl(bucket, `${prefix}${file.name}`));\n        } catch (error) {\n            console.error(\"Storage list error:\", error);\n            throw new Error(`Failed to list files: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    /**\n   * Get public URL for a file\n   */ getPublicUrl(bucket, path) {\n        const { data } = this.client.storage.from(bucket).getPublicUrl(path);\n        return data.publicUrl;\n    }\n    /**\n   * Check if bucket exists and create if needed\n   * Should be called during app initialization\n   */ async ensureBucketExists(bucket) {\n        try {\n            const { data: buckets, error: listError } = await this.client.storage.listBuckets();\n            if (listError) {\n                throw new Error(`Failed to list buckets: ${listError.message}`);\n            }\n            const bucketExists = buckets.some((b)=>b.name === bucket);\n            if (!bucketExists) {\n                const { error: createError } = await this.client.storage.createBucket(bucket, {\n                    public: true,\n                    allowedMimeTypes: [\n                        \"image/jpeg\",\n                        \"image/png\",\n                        \"image/webp\"\n                    ],\n                    fileSizeLimit: 5242880 // 5MB limit\n                });\n                if (createError) {\n                    throw new Error(`Failed to create bucket: ${createError.message}`);\n                }\n                console.log(`Created storage bucket: ${bucket}`);\n            }\n        } catch (error) {\n            console.error(\"Bucket setup error:\", error);\n            throw new Error(`Failed to setup storage bucket: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvcmVwb3NpdG9yaWVzL3N1cGFiYXNlLXN0b3JhZ2UucmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7OztDQUtDLEdBRWdEO0FBUzFDLE1BQU1DO0lBQ1gsSUFBWUMsU0FBUztRQUNuQixPQUFPRiwwREFBZUEsQ0FBQ0csU0FBUztJQUNsQztJQUVBOzs7R0FHQyxHQUNELE1BQU1DLE9BQU9DLE1BQWMsRUFBRUMsSUFBWSxFQUFFQyxJQUFVLEVBQW1CO1FBQ3RFLElBQUk7WUFDRixrQ0FBa0M7WUFDbEMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDUCxNQUFNLENBQUNRLE9BQU8sQ0FDOUNDLElBQUksQ0FBQ04sUUFDTEQsTUFBTSxDQUFDRSxNQUFNQyxNQUFNO2dCQUNsQkssY0FBYztnQkFDZEMsUUFBUSxNQUFNLGlDQUFpQztZQUNqRDtZQUVGLElBQUlKLE9BQU87Z0JBQ1QsTUFBTSxJQUFJSyxNQUFNLENBQUMsZUFBZSxFQUFFTCxNQUFNTSxPQUFPLENBQUMsQ0FBQztZQUNuRDtZQUVBLGlCQUFpQjtZQUNqQixNQUFNQyxZQUFZLElBQUksQ0FBQ0MsWUFBWSxDQUFDWixRQUFRQztZQUM1QyxPQUFPVTtRQUVULEVBQUUsT0FBT1AsT0FBTztZQUNkUyxRQUFRVCxLQUFLLENBQUMseUJBQXlCQTtZQUN2QyxNQUFNLElBQUlLLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRUwsaUJBQWlCSyxRQUFRTCxNQUFNTSxPQUFPLEdBQUcsZ0JBQWdCLENBQUM7UUFDdEc7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTUksT0FBT2QsTUFBYyxFQUFFQyxJQUFZLEVBQWlCO1FBQ3hELElBQUk7WUFDRixNQUFNLEVBQUVHLEtBQUssRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDUCxNQUFNLENBQUNRLE9BQU8sQ0FDeENDLElBQUksQ0FBQ04sUUFDTGUsTUFBTSxDQUFDO2dCQUFDZDthQUFLO1lBRWhCLElB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QUFNLENBQUMsZ0NBQWdDLEVBQUVMLGlCQUFpQkssUUFBUUwsTUFBTU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDO1FBQy9HO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2F0bGFzLWF1dGgvLi9zcmMvcmVwb3NpdG9yaWVzL3N1cGFiYXNlLXN0b3JhZ2UucmVwb3NpdG9yeS50cz9kMTQyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgU3RvcmFnZSBSZXBvc2l0b3J5XG4gKiBcbiAqIEltcGxlbWVudHMgUmVwb3NpdG9yeSBQYXR0ZXJuIGZvciBTdXBhYmFzZSBTdG9yYWdlIG9wZXJhdGlvbnNcbiAqIEFic3RyYWN0aW9uIGxheWVyIGJldHdlZW4gc2VydmljZSBhbmQgU3VwYWJhc2UgU0RLXG4gKi9cblxuaW1wb3J0IHsgZGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTdXBhYmFzZVN0b3JhZ2VSZXBvc2l0b3J5IHtcbiAgdXBsb2FkKGJ1Y2tldDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz47XG4gIGRlbGV0ZShidWNrZXQ6IHN0cmluZywgcGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgbGlzdChidWNrZXQ6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPjtcbiAgZ2V0UHVibGljVXJsKGJ1Y2tldDogc3RyaW5nLCBwYXRoOiBzdHJpbmcpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTdXBhYmFzZVN0b3JhZ2VSZXBvc2l0b3J5IGltcGxlbWVudHMgSVN1cGFiYXNlU3RvcmFnZVJlcG9zaXRvcnkge1xuICBwcml2YXRlIGdldCBjbGllbnQoKSB7XG4gICAgcmV0dXJuIGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWQgZmlsZSB0byBTdXBhYmFzZSBTdG9yYWdlXG4gICAqIFJldHVybnMgdGhlIHB1YmxpYyBVUkwgb2YgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICovXG4gIGFzeW5jIHVwbG9hZChidWNrZXQ6IHN0cmluZywgcGF0aDogc3RyaW5nLCBmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXBsb2FkIGZpbGUgdG8gU3VwYWJhc2UgU3RvcmFnZVxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnQuc3RvcmFnZVxuICAgICAgICAuZnJvbShidWNrZXQpXG4gICAgICAgIC51cGxvYWQocGF0aCwgZmlsZSwge1xuICAgICAgICAgIGNhY2hlQ29udHJvbDogJzM2MDAnLCAvLyBDYWNoZSBmb3IgMSBob3VyXG4gICAgICAgICAgdXBzZXJ0OiBmYWxzZSAvLyBEb24ndCBvdmVyd3JpdGUgZXhpc3RpbmcgZmlsZXNcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVwbG9hZCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHB1YmxpYyBVUkxcbiAgICAgIGNvbnN0IHB1YmxpY1VybCA9IHRoaXMuZ2V0UHVibGljVXJsKGJ1Y2tldCwgcGF0aCk7XG4gICAgICByZXR1cm4gcHVibGljVXJsO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0b3JhZ2UgdXBsb2FkIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwbG9hZCBmaWxlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgZmlsZSBmcm9tIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICovXG4gIGFzeW5jIGRlbGV0ZShidWNrZXQ6IHN0cmluZywgcGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50LnN0b3JhZ2VcbiAgICAgICAgLmZyb20oYnVja2V0KVxuICAgICAgICAucmVtb3ZlKFtwYXRoXSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERlbGV0ZSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdG9yYWdlIGRlbGV0ZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkZWxldGUgZmlsZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBmaWxlcyBpbiBhIHNwZWNpZmljIGZvbGRlci9wcmVmaXhcbiAgICogUmV0dXJucyBhcnJheSBvZiBwdWJsaWMgVVJMc1xuICAgKi9cbiAgYXN5bmMgbGlzdChidWNrZXQ6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50LnN0b3JhZ2VcbiAgICAgICAgLmZyb20oYnVja2V0KVxuICAgICAgICAubGlzdChwcmVmaXgsIHtcbiAgICAgICAgICBsaW1pdDogMTAwLCAvLyBMaW1pdCB0byAxMDAgaW1hZ2VzIHBlciBwcm9kdWN0XG4gICAgICAgICAgc29ydEJ5OiB7IGNvbHVtbjogJ2NyZWF0ZWRfYXQnLCBvcmRlcjogJ2Rlc2MnIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExpc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgdG8gcHVibGljIFVSTHNcbiAgICAgIHJldHVybiBkYXRhXG4gICAgICAgIC5maWx0ZXIoZmlsZSA9PiBmaWxlLm5hbWUgJiYgIWZpbGUubmFtZS5lbmRzV2l0aCgnLycpKSAvLyBGaWx0ZXIgb3V0IGZvbGRlcnNcbiAgICAgICAgLm1hcChmaWxlID0+IHRoaXMuZ2V0UHVibGljVXJsKGJ1Y2tldCwgYCR7cHJlZml4fSR7ZmlsZS5uYW1lfWApKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdG9yYWdlIGxpc3QgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbGlzdCBmaWxlczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHB1YmxpYyBVUkwgZm9yIGEgZmlsZVxuICAgKi9cbiAgZ2V0UHVibGljVXJsKGJ1Y2tldDogc3RyaW5nLCBwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcy5jbGllbnQuc3RvcmFnZVxuICAgICAgLmZyb20oYnVja2V0KVxuICAgICAgLmdldFB1YmxpY1VybChwYXRoKTtcblxuICAgIHJldHVybiBkYXRhLnB1YmxpY1VybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBidWNrZXQgZXhpc3RzIGFuZCBjcmVhdGUgaWYgbmVlZGVkXG4gICAqIFNob3VsZCBiZSBjYWxsZWQgZHVyaW5nIGFwcCBpbml0aWFsaXphdGlvblxuICAgKi9cbiAgYXN5bmMgZW5zdXJlQnVja2V0RXhpc3RzKGJ1Y2tldDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogYnVja2V0cywgZXJyb3I6IGxpc3RFcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnQuc3RvcmFnZS5saXN0QnVja2V0cygpO1xuICAgICAgXG4gICAgICBpZiAobGlzdEVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgYnVja2V0czogJHtsaXN0RXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYnVja2V0RXhpc3RzID0gYnVja2V0cy5zb21lKGIgPT4gYi5uYW1lID09PSBidWNrZXQpO1xuICAgICAgXG4gICAgICBpZiAoIWJ1Y2tldEV4aXN0cykge1xuICAgICAgICBjb25zdCB7IGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnQuc3RvcmFnZS5jcmVhdGVCdWNrZXQoYnVja2V0LCB7XG4gICAgICAgICAgcHVibGljOiB0cnVlLCAvLyBNYWtlIGJ1Y2tldCBwdWJsaWMgZm9yIGVhc3kgYWNjZXNzXG4gICAgICAgICAgYWxsb3dlZE1pbWVUeXBlczogWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJ10sXG4gICAgICAgICAgZmlsZVNpemVMaW1pdDogNTI0Mjg4MCAvLyA1TUIgbGltaXRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGJ1Y2tldDogJHtjcmVhdGVFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYENyZWF0ZWQgc3RvcmFnZSBidWNrZXQ6ICR7YnVja2V0fWApO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0J1Y2tldCBzZXR1cCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXR1cCBzdG9yYWdlIGJ1Y2tldDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiZGF0YWJhc2VTZXJ2aWNlIiwiU3VwYWJhc2VTdG9yYWdlUmVwb3NpdG9yeSIsImNsaWVudCIsImdldENsaWVudCIsInVwbG9hZCIsImJ1Y2tldCIsInBhdGgiLCJmaWxlIiwiZGF0YSIsImVycm9yIiwic3RvcmFnZSIsImZyb20iLCJjYWNoZUNvbnRyb2wiLCJ1cHNlcnQiLCJFcnJvciIsIm1lc3NhZ2UiLCJwdWJsaWNVcmwiLCJnZXRQdWJsaWNVcmwiLCJjb25zb2xlIiwiZGVsZXRlIiwicmVtb3ZlIiwibGlzdCIsInByZWZpeCIsImxpbWl0Iiwic29ydEJ5IiwiY29sdW1uIiwib3JkZXIiLCJmaWx0ZXIiLCJuYW1lIiwiZW5kc1dpdGgiLCJtYXAiLCJlbnN1cmVCdWNrZXRFeGlzdHMiLCJidWNrZXRzIiwibGlzdEVycm9yIiwibGlzdEJ1Y2tldHMiLCJidWNrZXRFeGlzdHMiLCJzb21lIiwiYiIsImNyZWF0ZUVycm9yIiwiY3JlYXRlQnVja2V0IiwicHVibGljIiwiYWxsb3dlZE1pbWVUeXBlcyIsImZpbGVTaXplTGltaXQiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/repositories/supabase-storage.repository.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/file-upload.service.ts":
/*!*********************************************!*\
  !*** ./src/services/file-upload.service.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileUploadService: () => (/* binding */ FileUploadService),\n/* harmony export */   createFileUploadService: () => (/* binding */ createFileUploadService)\n/* harmony export */ });\n/* harmony import */ var _repositories_supabase_storage_repository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/repositories/supabase-storage.repository */ \"(rsc)/./src/repositories/supabase-storage.repository.ts\");\n/* harmony import */ var _lib_utils_file_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/file-utils */ \"(rsc)/./src/lib/utils/file-utils.ts\");\n/**\n * File Upload Service - Supabase Storage Integration\n * \n * Implements clean architecture with SOLID principles\n * Handles hierarchical file organization: user/company/product/images\n */ \n\nclass FileUploadService {\n    constructor(storageRepository){\n        this.storageRepository = storageRepository;\n        this.bucket = \"uploads\";\n        this.maxFileSize = 5 * 1024 * 1024;\n        this.allowedFormats = [\n            \"image/jpeg\",\n            \"image/png\",\n            \"image/webp\"\n        ];\n    }\n    /**\n   * Upload product image with hierarchical organization\n   * Path: uploads/{userId}/{companyId}/products/{productId}/images/{fileName}\n   */ async uploadProductImage(file, userId, companyId, productId) {\n        // 1. Validate file\n        const validationError = (0,_lib_utils_file_utils__WEBPACK_IMPORTED_MODULE_1__.validateImageFile)(file, this.maxFileSize, this.allowedFormats);\n        if (validationError) {\n            throw new Error(validationError);\n        }\n        // 2. Optimize file (compress if needed)\n        const optimizedFile = await (0,_lib_utils_file_utils__WEBPACK_IMPORTED_MODULE_1__.optimizeImageFile)(file);\n        // 3. Generate unique filename\n        const fileName = (0,_lib_utils_file_utils__WEBPACK_IMPORTED_MODULE_1__.generateUniqueFileName)(optimizedFile.name);\n        // 4. Build hierarchical path\n        const filePath = this.buildProductImagePath(userId, companyId, productId, fileName);\n        // 5. Upload to Supabase Storage\n        const publicUrl = await this.storageRepository.upload(this.bucket, filePath, optimizedFile);\n        return publicUrl;\n    }\n    /**\n   * Delete product image by URL\n   */ async deleteProductImage(imageUrl) {\n        const filePath = this.extractFilePathFromUrl(imageUrl);\n        if (!filePath) {\n            throw new Error(\"Invalid image URL\");\n        }\n        await this.storageRepository.delete(this.bucket, filePath);\n    }\n    /**\n   * Get all images for a specific product\n   */ async getProductImages(userId, companyId, productId) {\n        const prefix = this.buildProductImagePrefix(userId, companyId, productId);\n        return await this.storageRepository.list(this.bucket, prefix);\n    }\n    /**\n   * Delete all images for a product (when product is deleted)\n   */ async deleteAllProductImages(userId, companyId, productId) {\n        const images = await this.getProductImages(userId, companyId, productId);\n        // Delete all images in parallel\n        const deletePromises = images.map((imageUrl)=>this.deleteProductImage(imageUrl));\n        await Promise.all(deletePromises);\n    }\n    /**\n   * Build hierarchical path for product image\n   * Format: {userId}/{companyId}/products/{productId}/images/{fileName}\n   */ buildProductImagePath(userId, companyId, productId, fileName) {\n        return `${userId}/${companyId}/products/${productId}/images/${fileName}`;\n    }\n    /**\n   * Build prefix for listing product images\n   */ buildProductImagePrefix(userId, companyId, productId) {\n        return `${userId}/${companyId}/products/${productId}/images/`;\n    }\n    /**\n   * Extract file path from Supabase public URL\n   */ extractFilePathFromUrl(url) {\n        try {\n            const urlParts = url.split(\"/storage/v1/object/public/\" + this.bucket + \"/\");\n            return urlParts[1] || null;\n        } catch  {\n            return null;\n        }\n    }\n}\n// Factory function following the Factory Pattern\nfunction createFileUploadService() {\n    const storageRepository = new _repositories_supabase_storage_repository__WEBPACK_IMPORTED_MODULE_0__.SupabaseStorageRepository();\n    return new FileUploadService(storageRepository);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvZmlsZS11cGxvYWQuc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7O0NBS0MsR0FFc0Y7QUFDZTtBQXlCL0YsTUFBTUk7SUFLWEMsWUFDRSxpQkFBb0QsQ0FDcEQ7YUFEUUMsb0JBQUFBO2FBTE9DLFNBQVM7YUFDVEMsY0FBYyxJQUFJLE9BQU87YUFDekJDLGlCQUFpQjtZQUFDO1lBQWM7WUFBYTtTQUFhO0lBSXhFO0lBRUg7OztHQUdDLEdBQ0QsTUFBTUMsbUJBQ0pDLElBQVUsRUFDVkMsTUFBYyxFQUNkQyxTQUFpQixFQUNqQkMsU0FBaUIsRUFDQTtRQUNqQixtQkFBbUI7UUFDbkIsTUFBTUMsa0JBQWtCYix3RUFBaUJBLENBQUNTLE1BQU0sSUFBSSxDQUFDSCxXQUFXLEVBQUUsSUFBSSxDQUFDQyxjQUFjO1FBQ3JGLElBQUlNLGlCQUFpQjtZQUNuQixNQUFNLElBQUlDLE1BQU1EO1FBQ2xCO1FBRUEsd0NBQXdDO1FBQ3hDLE1BQU1FLGdCQUFnQixNQUFNZCx3RUFBaUJBLENBQUNRO1FBRTlDLDhCQUE4QjtRQUM5QixNQUFNTyxXQUFXakIsNkVBQXNCQSxDQUFDZ0IsY0FBY0UsSUFBSTtRQUUxRCw2QkFBNkI7UUFDN0IsTUFBTUMsV0FBVyxJQUFJLENBQUNDLHFCQUFxQixDQUFDVCxRQUFRQyxXQUFXQyxXQUFXSTtRQUUxRSxnQ0FBZ0M7UUFDaEMsTUFBTUksWUFBWSxNQUFNLElBQUksQ0FBQ2hCLGlCQUFpQixDQUFDaUIsTUFBTSxDQUFDLElBQUksQ0FBQ2hCLE1BQU0sRUFBRWEsVUFBVUg7UUFFN0UsT0FBT0s7SUFDVDtJQUVBOztHQUVDLEdBQ0QsTUFBTUUsbUJBQW1CQyxRQUFnQixFQUFpQjtRQUN4RCxNQUFNTCxXQUFXLElBQUksQ0FBQ00sc0JBQXNCLENBQUNEO1FBQzdDLElBQUksQ0FBQ0wsVUFBVTtZQUNiLE1BQU0sSUFBSUosTUFBTTtRQUNsQjtRQUVBLE1BQU0sSUFBSSxDQUFDVixpQkFBaUIsQ0FBQ3FCLE1BQU0sQ0FBQyxJQUFJLENBQUNwQixNQUFNLEVBQUVhO0lBQ25EO0lBRUE7O0dBRUMsR0FDRCxNQUFNUSxpQkFDSmhCLE1BQWMsRUFDZEMsU0FBaUIsRUFDakJDLFNBQWlCLEVBQ0U7UUFDbkIsTUFBTWUsU0FBUyxJQUFJLENBQUNDLHVCQUF1QixDQUFDbEIsUUFBUUMsV0FBV0M7UUFDL0QsT0FBTyxNQUFNLElBQUksQ0FBQ1IsaUJBQWlCLENBQUN5QixJQUFJLENBQUMsSUFBSSxDQUFDeEIsTUFBTSxFQUFFc0I7SUFDeEQ7SUFFQTs7R0FFQyxHQUNELE1BQU1HLHVCQUNKcEIsTUFBYyxFQUNkQyxTQUFpQixFQUNqQkMsU0FBaUIsRUFDRjtRQUNmLE1BQU1tQixTQUFTLE1BQU0sSUFBSSxDQUFDTCxnQkFBZ0IsQ0FBQ2hCLFFBQVFDLFdBQVdDO1FBRTlELGdDQUFnQztRQUNoQyxNQUFNb0IsaUJBQWlCRCxPQUFPRSxHQUFHLENBQUNWLENBQUFBLFdBQVksSUFBSSxDQUFDRCxrQkFBa0IsQ0FBQ0M7UUFDdEUsTUFBTVcsUUFBUUMsR0FBRyxDQUFDSDtJQUNwQjtJQUVBOzs7R0FHQyxHQUNELHNCQUNFdEIsTUFBYyxFQUNkQyxTQUFpQixFQUNqQkMsU0FBaUIsRUFDakJJLFFBQWdCLEVBQ1I7UUFDUixPQUFPLENBQUMsRUFBRU4sT0FBTyxDQUFDLEVBQUVDLFVBQVUsVUFBVSxFQUFFQyxVQUFVLFFBQVEsRUFBRUksU0FBUyxDQUFDO0lBQzFFO0lBRUE7O0dBRUMsR0FDRCx3QkFDRU4sTUFBYyxFQUNkQyxTQUFpQixFQUNqQkMsU0FBaUIsRUFDVDtRQUNSLE9BQU8sQ0FBQyxFQUFFRixPQUFPLENBQUMsRUFBRUMsVUFBVSxVQUFVLEVBQUVDLFVBQVUsUUFBUSxDQUFDO0lBQy9EO0lBRUE7O0dBRUMsR0FDRCx1QkFBK0J3QixHQUFXLEVBQWlCO1FBQ3pELElBQUk7WUFDRixNQUFNQyxXQUFXRCxJQUFJRSxLQUFLLENBQUMsK0JBQStCLElBQUksQ0FBQ2pDLE1BQU0sR0FBRztZQUN4RSxPQUFPZ0MsUUFBUSxDQUFDLEVBQUUsSUFBSTtRQUN4QixFQUFFLE9BQU07WUFDTixPQUFPO1FBQ1Q7SUFDRjtBQUNGO0FBRUEsaURBQWlEO0FBQzFDLFNBQVNFO0lBQ2QsTUFBTW5DLG9CQUFvQixJQUFJTixnR0FBeUJBO0lBQ3ZELE9BQU8sSUFBSUksa0JBQWtCRTtBQUMvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2F0bGFzLWF1dGgvLi9zcmMvc2VydmljZXMvZmlsZS11cGxvYWQuc2VydmljZS50cz9lMGEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRmlsZSBVcGxvYWQgU2VydmljZSAtIFN1cGFiYXNlIFN0b3JhZ2UgSW50ZWdyYXRpb25cbiAqIFxuICogSW1wbGVtZW50cyBjbGVhbiBhcmNoaXRlY3R1cmUgd2l0aCBTT0xJRCBwcmluY2lwbGVzXG4gKiBIYW5kbGVzIGhpZXJhcmNoaWNhbCBmaWxlIG9yZ2FuaXphdGlvbjogdXNlci9jb21wYW55L3Byb2R1Y3QvaW1hZ2VzXG4gKi9cblxuaW1wb3J0IHsgU3VwYWJhc2VTdG9yYWdlUmVwb3NpdG9yeSB9IGZyb20gJ0AvcmVwb3NpdG9yaWVzL3N1cGFiYXNlLXN0b3JhZ2UucmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUZpbGVOYW1lLCB2YWxpZGF0ZUltYWdlRmlsZSwgb3B0aW1pemVJbWFnZUZpbGUgfSBmcm9tICdAL2xpYi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJRmlsZVVwbG9hZFNlcnZpY2Uge1xuICB1cGxvYWRQcm9kdWN0SW1hZ2UoXG4gICAgZmlsZTogRmlsZSwgXG4gICAgdXNlcklkOiBzdHJpbmcsIFxuICAgIGNvbXBhbnlJZDogc3RyaW5nLCBcbiAgICBwcm9kdWN0SWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz47XG4gIFxuICBkZWxldGVQcm9kdWN0SW1hZ2UoaW1hZ2VVcmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIFxuICBnZXRQcm9kdWN0SW1hZ2VzKFxuICAgIHVzZXJJZDogc3RyaW5nLCBcbiAgICBjb21wYW55SWQ6IHN0cmluZywgXG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmdbXT47XG4gIFxuICBkZWxldGVBbGxQcm9kdWN0SW1hZ2VzKFxuICAgIHVzZXJJZDogc3RyaW5nLCBcbiAgICBjb21wYW55SWQ6IHN0cmluZywgXG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRTZXJ2aWNlIGltcGxlbWVudHMgSUZpbGVVcGxvYWRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBidWNrZXQgPSAndXBsb2Fkcyc7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4RmlsZVNpemUgPSA1ICogMTAyNCAqIDEwMjQ7IC8vIDVNQlxuICBwcml2YXRlIHJlYWRvbmx5IGFsbG93ZWRGb3JtYXRzID0gWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJ107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBzdG9yYWdlUmVwb3NpdG9yeTogU3VwYWJhc2VTdG9yYWdlUmVwb3NpdG9yeVxuICApIHt9XG5cbiAgLyoqXG4gICAqIFVwbG9hZCBwcm9kdWN0IGltYWdlIHdpdGggaGllcmFyY2hpY2FsIG9yZ2FuaXphdGlvblxuICAgKiBQYXRoOiB1cGxvYWRzL3t1c2VySWR9L3tjb21wYW55SWR9L3Byb2R1Y3RzL3twcm9kdWN0SWR9L2ltYWdlcy97ZmlsZU5hbWV9XG4gICAqL1xuICBhc3luYyB1cGxvYWRQcm9kdWN0SW1hZ2UoXG4gICAgZmlsZTogRmlsZSxcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBjb21wYW55SWQ6IHN0cmluZyxcbiAgICBwcm9kdWN0SWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIDEuIFZhbGlkYXRlIGZpbGVcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZUltYWdlRmlsZShmaWxlLCB0aGlzLm1heEZpbGVTaXplLCB0aGlzLmFsbG93ZWRGb3JtYXRzKTtcbiAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG5cbiAgICAvLyAyLiBPcHRpbWl6ZSBmaWxlIChjb21wcmVzcyBpZiBuZWVkZWQpXG4gICAgY29uc3Qgb3B0aW1pemVkRmlsZSA9IGF3YWl0IG9wdGltaXplSW1hZ2VGaWxlKGZpbGUpO1xuXG4gICAgLy8gMy4gR2VuZXJhdGUgdW5pcXVlIGZpbGVuYW1lXG4gICAgY29uc3QgZmlsZU5hbWUgPSBnZW5lcmF0ZVVuaXF1ZUZpbGVOYW1lKG9wdGltaXplZEZpbGUubmFtZSk7XG5cbiAgICAvLyA0LiBCdWlsZCBoaWVyYXJjaGljYWwgcGF0aFxuICAgIGNvbnN0IGZpbGVQYXRoID0gdGhpcy5idWlsZFByb2R1Y3RJbWFnZVBhdGgodXNlcklkLCBjb21wYW55SWQsIHByb2R1Y3RJZCwgZmlsZU5hbWUpO1xuXG4gICAgLy8gNS4gVXBsb2FkIHRvIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICBjb25zdCBwdWJsaWNVcmwgPSBhd2FpdCB0aGlzLnN0b3JhZ2VSZXBvc2l0b3J5LnVwbG9hZCh0aGlzLmJ1Y2tldCwgZmlsZVBhdGgsIG9wdGltaXplZEZpbGUpO1xuXG4gICAgcmV0dXJuIHB1YmxpY1VybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgcHJvZHVjdCBpbWFnZSBieSBVUkxcbiAgICovXG4gIGFzeW5jIGRlbGV0ZVByb2R1Y3RJbWFnZShpbWFnZVVybDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSB0aGlzLmV4dHJhY3RGaWxlUGF0aEZyb21VcmwoaW1hZ2VVcmwpO1xuICAgIGlmICghZmlsZVBhdGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbWFnZSBVUkwnKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnN0b3JhZ2VSZXBvc2l0b3J5LmRlbGV0ZSh0aGlzLmJ1Y2tldCwgZmlsZVBhdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgaW1hZ2VzIGZvciBhIHNwZWNpZmljIHByb2R1Y3RcbiAgICovXG4gIGFzeW5jIGdldFByb2R1Y3RJbWFnZXMoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY29tcGFueUlkOiBzdHJpbmcsXG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHByZWZpeCA9IHRoaXMuYnVpbGRQcm9kdWN0SW1hZ2VQcmVmaXgodXNlcklkLCBjb21wYW55SWQsIHByb2R1Y3RJZCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc3RvcmFnZVJlcG9zaXRvcnkubGlzdCh0aGlzLmJ1Y2tldCwgcHJlZml4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYWxsIGltYWdlcyBmb3IgYSBwcm9kdWN0ICh3aGVuIHByb2R1Y3QgaXMgZGVsZXRlZClcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUFsbFByb2R1Y3RJbWFnZXMoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY29tcGFueUlkOiBzdHJpbmcsXG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaW1hZ2VzID0gYXdhaXQgdGhpcy5nZXRQcm9kdWN0SW1hZ2VzKHVzZXJJZCwgY29tcGFueUlkLCBwcm9kdWN0SWQpO1xuICAgIFxuICAgIC8vIERlbGV0ZSBhbGwgaW1hZ2VzIGluIHBhcmFsbGVsXG4gICAgY29uc3QgZGVsZXRlUHJvbWlzZXMgPSBpbWFnZXMubWFwKGltYWdlVXJsID0+IHRoaXMuZGVsZXRlUHJvZHVjdEltYWdlKGltYWdlVXJsKSk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoZGVsZXRlUHJvbWlzZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGhpZXJhcmNoaWNhbCBwYXRoIGZvciBwcm9kdWN0IGltYWdlXG4gICAqIEZvcm1hdDoge3VzZXJJZH0ve2NvbXBhbnlJZH0vcHJvZHVjdHMve3Byb2R1Y3RJZH0vaW1hZ2VzL3tmaWxlTmFtZX1cbiAgICovXG4gIHByaXZhdGUgYnVpbGRQcm9kdWN0SW1hZ2VQYXRoKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGNvbXBhbnlJZDogc3RyaW5nLFxuICAgIHByb2R1Y3RJZDogc3RyaW5nLFxuICAgIGZpbGVOYW1lOiBzdHJpbmdcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dXNlcklkfS8ke2NvbXBhbnlJZH0vcHJvZHVjdHMvJHtwcm9kdWN0SWR9L2ltYWdlcy8ke2ZpbGVOYW1lfWA7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgcHJlZml4IGZvciBsaXN0aW5nIHByb2R1Y3QgaW1hZ2VzXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkUHJvZHVjdEltYWdlUHJlZml4KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGNvbXBhbnlJZDogc3RyaW5nLFxuICAgIHByb2R1Y3RJZDogc3RyaW5nXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3VzZXJJZH0vJHtjb21wYW55SWR9L3Byb2R1Y3RzLyR7cHJvZHVjdElkfS9pbWFnZXMvYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGZpbGUgcGF0aCBmcm9tIFN1cGFiYXNlIHB1YmxpYyBVUkxcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEZpbGVQYXRoRnJvbVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxQYXJ0cyA9IHVybC5zcGxpdCgnL3N0b3JhZ2UvdjEvb2JqZWN0L3B1YmxpYy8nICsgdGhpcy5idWNrZXQgKyAnLycpO1xuICAgICAgcmV0dXJuIHVybFBhcnRzWzFdIHx8IG51bGw7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLy8gRmFjdG9yeSBmdW5jdGlvbiBmb2xsb3dpbmcgdGhlIEZhY3RvcnkgUGF0dGVyblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZpbGVVcGxvYWRTZXJ2aWNlKCk6IElGaWxlVXBsb2FkU2VydmljZSB7XG4gIGNvbnN0IHN0b3JhZ2VSZXBvc2l0b3J5ID0gbmV3IFN1cGFiYXNlU3RvcmFnZVJlcG9zaXRvcnkoKTtcbiAgcmV0dXJuIG5ldyBGaWxlVXBsb2FkU2VydmljZShzdG9yYWdlUmVwb3NpdG9yeSk7XG59Il0sIm5hbWVzIjpbIlN1cGFiYXNlU3RvcmFnZVJlcG9zaXRvcnkiLCJnZW5lcmF0ZVVuaXF1ZUZpbGVOYW1lIiwidmFsaWRhdGVJbWFnZUZpbGUiLCJvcHRpbWl6ZUltYWdlRmlsZSIsIkZpbGVVcGxvYWRTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJzdG9yYWdlUmVwb3NpdG9yeSIsImJ1Y2tldCIsIm1heEZpbGVTaXplIiwiYWxsb3dlZEZvcm1hdHMiLCJ1cGxvYWRQcm9kdWN0SW1hZ2UiLCJmaWxlIiwidXNlcklkIiwiY29tcGFueUlkIiwicHJvZHVjdElkIiwidmFsaWRhdGlvbkVycm9yIiwiRXJyb3IiLCJvcHRpbWl6ZWRGaWxlIiwiZmlsZU5hbWUiLCJuYW1lIiwiZmlsZVBhdGgiLCJidWlsZFByb2R1Y3RJbWFnZVBhdGgiLCJwdWJsaWNVcmwiLCJ1cGxvYWQiLCJkZWxldGVQcm9kdWN0SW1hZ2UiLCJpbWFnZVVybCIsImV4dHJhY3RGaWxlUGF0aEZyb21VcmwiLCJkZWxldGUiLCJnZXRQcm9kdWN0SW1hZ2VzIiwicHJlZml4IiwiYnVpbGRQcm9kdWN0SW1hZ2VQcmVmaXgiLCJsaXN0IiwiZGVsZXRlQWxsUHJvZHVjdEltYWdlcyIsImltYWdlcyIsImRlbGV0ZVByb21pc2VzIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsInVybCIsInVybFBhcnRzIiwic3BsaXQiLCJjcmVhdGVGaWxlVXBsb2FkU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/file-upload.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/next","vendor-chunks/ws","vendor-chunks/semver","vendor-chunks/whatwg-url","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Fproduct-image%2Froute&page=%2Fapi%2Fupload%2Fproduct-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Fproduct-image%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();