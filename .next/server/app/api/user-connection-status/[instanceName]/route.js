/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user-connection-status/[instanceName]/route";
exports.ids = ["app/api/user-connection-status/[instanceName]/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&page=%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&page=%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_pedrotorrezani_Documents_Programacao_atlas_src_app_api_user_connection_status_instanceName_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user-connection-status/[instanceName]/route.ts */ \"(rsc)/./src/app/api/user-connection-status/[instanceName]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user-connection-status/[instanceName]/route\",\n        pathname: \"/api/user-connection-status/[instanceName]\",\n        filename: \"route\",\n        bundlePath: \"app/api/user-connection-status/[instanceName]/route\"\n    },\n    resolvedPagePath: \"/Users/pedrotorrezani/Documents/Programacao/atlas/src/app/api/user-connection-status/[instanceName]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_pedrotorrezani_Documents_Programacao_atlas_src_app_api_user_connection_status_instanceName_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user-connection-status/[instanceName]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyLWNvbm5lY3Rpb24tc3RhdHVzJTJGJTVCaW5zdGFuY2VOYW1lJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1c2VyLWNvbm5lY3Rpb24tc3RhdHVzJTJGJTVCaW5zdGFuY2VOYW1lJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXNlci1jb25uZWN0aW9uLXN0YXR1cyUyRiU1Qmluc3RhbmNlTmFtZSU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBlZHJvdG9ycmV6YW5pJTJGRG9jdW1lbnRzJTJGUHJvZ3JhbWFjYW8lMkZhdGxhcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwZWRyb3RvcnJlemFuaSUyRkRvY3VtZW50cyUyRlByb2dyYW1hY2FvJTJGYXRsYXMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzREO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8/OGZmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcGVkcm90b3JyZXphbmkvRG9jdW1lbnRzL1Byb2dyYW1hY2FvL2F0bGFzL3NyYy9hcHAvYXBpL3VzZXItY29ubmVjdGlvbi1zdGF0dXMvW2luc3RhbmNlTmFtZV0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXItY29ubmVjdGlvbi1zdGF0dXMvW2luc3RhbmNlTmFtZV0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2VyLWNvbm5lY3Rpb24tc3RhdHVzL1tpbnN0YW5jZU5hbWVdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91c2VyLWNvbm5lY3Rpb24tc3RhdHVzL1tpbnN0YW5jZU5hbWVdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3BlZHJvdG9ycmV6YW5pL0RvY3VtZW50cy9Qcm9ncmFtYWNhby9hdGxhcy9zcmMvYXBwL2FwaS91c2VyLWNvbm5lY3Rpb24tc3RhdHVzL1tpbnN0YW5jZU5hbWVdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS91c2VyLWNvbm5lY3Rpb24tc3RhdHVzL1tpbnN0YW5jZU5hbWVdL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&page=%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/user-connection-status/[instanceName]/route.ts":
/*!********************************************************************!*\
  !*** ./src/app/api/user-connection-status/[instanceName]/route.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\nasync function GET(request, { params }) {\n    try {\n        // Verificar autenticação\n        const authorization = request.headers.get(\"authorization\");\n        if (!authorization?.startsWith(\"Bearer \")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Token n\\xe3o fornecido\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authorization.split(\" \")[1];\n        const { userId } = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyJWT)(token);\n        const { instanceName } = params;\n        // Conectar ao Supabase\n        const { createClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\"));\n        const supabase = createClient(\"https://bxhgjurnibfcbcxqxmsb.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4aGdqdXJuaWJmY2JjeHF4bXNiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTM4MTQzMCwiZXhwIjoyMDY2OTU3NDMwfQ.ISSpFu9T01tI4EWIAbgNrjhr6sYnQbjrHliW7d1XrMA\");\n        // Buscar conexão do usuário\n        const { data: connection, error } = await supabase.from(\"whatsapp_connections\").select(\"*\").eq(\"instance_name\", instanceName).eq(\"user_id\", userId).single();\n        if (error || !connection) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Conex\\xe3o n\\xe3o encontrada\"\n            }, {\n                status: 404\n            });\n        }\n        // Verificar se a conexão expirou\n        const now = new Date();\n        const expiresAt = new Date(connection.expires_at);\n        if (now > expiresAt && connection.status !== \"connected\") {\n            // Atualizar status para expirado\n            await supabase.from(\"whatsapp_connections\").update({\n                status: \"expired\",\n                last_updated: now.toISOString()\n            }).eq(\"id\", connection.id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    qrCode: null,\n                    status: \"expired\",\n                    phoneNumber: connection.phone_number,\n                    profileName: null,\n                    attemptsRemaining: connection.connection_attempts || 0\n                }\n            });\n        }\n        // Se pendente, verificar status na Evolution API e buscar QR Code se necessário\n        if (connection.status === \"pending\") {\n            try {\n                const evolutionApiUrl = process.env.EVOLUTION_API_URL;\n                const evolutionApiKey = process.env.EVOLUTION_API_KEY;\n                if (evolutionApiUrl && evolutionApiKey) {\n                    // Verificar status da conexão\n                    const evolutionResponse = await fetch(`${evolutionApiUrl}/instance/connectionState/${instanceName}`, {\n                        headers: {\n                            \"apikey\": evolutionApiKey\n                        }\n                    });\n                    if (evolutionResponse.ok) {\n                        const evolutionData = await evolutionResponse.json();\n                        // Se conectado na Evolution API, atualizar no banco\n                        if (evolutionData.instance?.state === \"open\") {\n                            await supabase.from(\"whatsapp_connections\").update({\n                                status: \"connected\",\n                                phone_number: evolutionData.instance?.phoneNumber || connection.phone_number,\n                                last_updated: now.toISOString()\n                            }).eq(\"id\", connection.id);\n                            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                                success: true,\n                                data: {\n                                    qrCode: null,\n                                    status: \"connected\",\n                                    phoneNumber: evolutionData.instance?.phoneNumber || connection.phone_number,\n                                    profileName: evolutionData.instance?.profileName || null,\n                                    attemptsRemaining: connection.connection_attempts || 0\n                                }\n                            });\n                        }\n                    }\n                    // Se não há QR Code no banco, tentar buscar na Evolution API\n                    if (!connection.qr_code) {\n                        try {\n                            const qrResponse = await fetch(`${evolutionApiUrl}/instance/connect/${instanceName}`, {\n                                method: \"GET\",\n                                headers: {\n                                    \"apikey\": evolutionApiKey,\n                                    \"Content-Type\": \"application/json\"\n                                }\n                            });\n                            if (qrResponse.ok) {\n                                const qrData = await qrResponse.json();\n                                console.log(\"Buscando QR Code na Evolution API:\", {\n                                    hasBase64: !!qrData.base64,\n                                    base64Length: qrData.base64?.length || 0\n                                });\n                                if (qrData.base64) {\n                                    // Atualizar QR Code no banco\n                                    await supabase.from(\"whatsapp_connections\").update({\n                                        qr_code: qrData.base64,\n                                        last_updated: now.toISOString()\n                                    }).eq(\"id\", connection.id);\n                                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                                        success: true,\n                                        data: {\n                                            qrCode: qrData.base64,\n                                            status: connection.status,\n                                            phoneNumber: connection.phone_number,\n                                            profileName: null,\n                                            attemptsRemaining: connection.connection_attempts || 0\n                                        }\n                                    });\n                                }\n                            }\n                        } catch (qrError) {\n                            console.warn(\"Erro ao buscar QR Code na Evolution API:\", qrError);\n                        }\n                    }\n                }\n            } catch (evolutionError) {\n                console.error(\"Error checking Evolution API status:\", evolutionError);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                qrCode: connection.qr_code,\n                status: connection.status,\n                phoneNumber: connection.phone_number,\n                profileName: null,\n                attemptsRemaining: connection.connection_attempts || 0\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching connection status:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request, { params }) {\n    try {\n        // Verificar autenticação\n        const authorization = request.headers.get(\"authorization\");\n        if (!authorization?.startsWith(\"Bearer \")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Token n\\xe3o fornecido\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authorization.split(\" \")[1];\n        const { userId } = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyJWT)(token);\n        const { instanceName } = params;\n        // Conectar ao Supabase   \n        const { createClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\"));\n        const supabase = createClient(\"https://bxhgjurnibfcbcxqxmsb.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4aGdqdXJuaWJmY2JjeHF4bXNiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTM4MTQzMCwiZXhwIjoyMDY2OTU3NDMwfQ.ISSpFu9T01tI4EWIAbgNrjhr6sYnQbjrHliW7d1XrMA\");\n        // Buscar e deletar conexão\n        const { error } = await supabase.from(\"whatsapp_connections\").delete().eq(\"instance_name\", instanceName).eq(\"user_id\", userId);\n        if (error) {\n            console.error(\"Error deleting connection:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Erro ao deletar conex\\xe3o\"\n            }, {\n                status: 500\n            });\n        }\n        // Tentar deletar instância na Evolution API\n        try {\n            const evolutionApiUrl = process.env.EVOLUTION_API_URL;\n            const evolutionApiKey = process.env.EVOLUTION_API_KEY;\n            if (evolutionApiUrl && evolutionApiKey) {\n                await fetch(`${evolutionApiUrl}/instance/delete/${instanceName}`, {\n                    method: \"DELETE\",\n                    headers: {\n                        \"apikey\": evolutionApiKey\n                    }\n                });\n            }\n        } catch (evolutionError) {\n            console.error(\"Error deleting Evolution API instance:\", evolutionError);\n        // Não retornar erro aqui pois a conexão já foi deletada do banco\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Conex\\xe3o deletada com sucesso\"\n        });\n    } catch (error) {\n        console.error(\"Error deleting connection:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2VyLWNvbm5lY3Rpb24tc3RhdHVzL1tpbnN0YW5jZU5hbWVdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDakI7QUFRaEMsZUFBZUUsSUFBSUMsT0FBb0IsRUFBRSxFQUFFQyxNQUFNLEVBQWU7SUFDckUsSUFBSTtRQUNGLHlCQUF5QjtRQUN6QixNQUFNQyxnQkFBZ0JGLFFBQVFHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQzFDLElBQUksQ0FBQ0YsZUFBZUcsV0FBVyxZQUFZO1lBQ3pDLE9BQU9SLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNCLEdBQy9CO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxRQUFRUCxjQUFjUSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDekMsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBRyxNQUFNYixvREFBU0EsQ0FBQ1c7UUFDbkMsTUFBTSxFQUFFRyxZQUFZLEVBQUUsR0FBR1g7UUFFekIsdUJBQXVCO1FBQ3ZCLE1BQU0sRUFBRVksWUFBWSxFQUFFLEdBQUcsTUFBTSxvTEFBTztRQUN0QyxNQUFNQyxXQUFXRCxhQUNmRSwwQ0FBd0IsRUFDeEJBLDZOQUFxQztRQUd2Qyw0QkFBNEI7UUFDNUIsTUFBTSxFQUFFSSxNQUFNQyxVQUFVLEVBQUViLEtBQUssRUFBRSxHQUFHLE1BQU1PLFNBQ3ZDTyxJQUFJLENBQUMsd0JBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsaUJBQWlCWCxjQUNwQlcsRUFBRSxDQUFDLFdBQVdaLFFBQ2RhLE1BQU07UUFFVCxJQUFJakIsU0FBUyxDQUFDYSxZQUFZO1lBQ3hCLE9BQU92QixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF5QixHQUNsQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsaUNBQWlDO1FBQ2pDLE1BQU1pQixNQUFNLElBQUlDO1FBQ2hCLE1B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Z0MsU0FBUztRQUNYO0lBRUYsRUFBRSxPQUFPMUQsT0FBWTtRQUNuQitDLFFBQVEvQyxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPVixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQTJCLEdBQ3BDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8uL3NyYy9hcHAvYXBpL3VzZXItY29ubmVjdGlvbi1zdGF0dXMvW2luc3RhbmNlTmFtZV0vcm91dGUudHM/ZjY4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgdmVyaWZ5SldUIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5cbmludGVyZmFjZSBSb3V0ZVBhcmFtcyB7XG4gIHBhcmFtczoge1xuICAgIGluc3RhbmNlTmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiBSb3V0ZVBhcmFtcykge1xuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2HDp8Ojb1xuICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgaWYgKCFhdXRob3JpemF0aW9uPy5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1Rva2VuIG7Do28gZm9ybmVjaWRvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV07XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGF3YWl0IHZlcmlmeUpXVCh0b2tlbik7XG4gICAgY29uc3QgeyBpbnN0YW5jZU5hbWUgfSA9IHBhcmFtcztcblxuICAgIC8vIENvbmVjdGFyIGFvIFN1cGFiYXNlXG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJyk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwhLFxuICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbiAgICApO1xuXG4gICAgLy8gQnVzY2FyIGNvbmV4w6NvIGRvIHVzdcOhcmlvXG4gICAgY29uc3QgeyBkYXRhOiBjb25uZWN0aW9uLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd3aGF0c2FwcF9jb25uZWN0aW9ucycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaW5zdGFuY2VfbmFtZScsIGluc3RhbmNlTmFtZSlcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhY29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ29uZXjDo28gbsOjbyBlbmNvbnRyYWRhJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHNlIGEgY29uZXjDo28gZXhwaXJvdVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoY29ubmVjdGlvbi5leHBpcmVzX2F0KTtcbiAgICBcbiAgICBpZiAobm93ID4gZXhwaXJlc0F0ICYmIGNvbm5lY3Rpb24uc3RhdHVzICE9PSAnY29ubmVjdGVkJykge1xuICAgICAgLy8gQXR1YWxpemFyIHN0YXR1cyBwYXJhIGV4cGlyYWRvXG4gICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnd2hhdHNhcHBfY29ubmVjdGlvbnMnKVxuICAgICAgICAudXBkYXRlKHsgXG4gICAgICAgICAgc3RhdHVzOiAnZXhwaXJlZCcsXG4gICAgICAgICAgbGFzdF91cGRhdGVkOiBub3cudG9JU09TdHJpbmcoKSBcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIGNvbm5lY3Rpb24uaWQpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcXJDb2RlOiBudWxsLFxuICAgICAgICAgIHN0YXR1czogJ2V4cGlyZWQnLFxuICAgICAgICAgIHBob25lTnVtYmVyOiBjb25uZWN0aW9uLnBob25lX251bWJlcixcbiAgICAgICAgICBwcm9maWxlTmFtZTogbnVsbCxcbiAgICAgICAgICBhdHRlbXB0c1JlbWFpbmluZzogY29ubmVjdGlvbi5jb25uZWN0aW9uX2F0dGVtcHRzIHx8IDBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2UgcGVuZGVudGUsIHZlcmlmaWNhciBzdGF0dXMgbmEgRXZvbHV0aW9uIEFQSSBlIGJ1c2NhciBRUiBDb2RlIHNlIG5lY2Vzc8OhcmlvXG4gICAgaWYgKGNvbm5lY3Rpb24uc3RhdHVzID09PSAncGVuZGluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV2b2x1dGlvbkFwaVVybCA9IHByb2Nlc3MuZW52LkVWT0xVVElPTl9BUElfVVJMO1xuICAgICAgICBjb25zdCBldm9sdXRpb25BcGlLZXkgPSBwcm9jZXNzLmVudi5FVk9MVVRJT05fQVBJX0tFWTtcblxuICAgICAgICBpZiAoZXZvbHV0aW9uQXBpVXJsICYmIGV2b2x1dGlvbkFwaUtleSkge1xuICAgICAgICAgIC8vIFZlcmlmaWNhciBzdGF0dXMgZGEgY29uZXjDo29cbiAgICAgICAgICBjb25zdCBldm9sdXRpb25SZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICAgYCR7ZXZvbHV0aW9uQXBpVXJsfS9pbnN0YW5jZS9jb25uZWN0aW9uU3RhdGUvJHtpbnN0YW5jZU5hbWV9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdhcGlrZXknOiBldm9sdXRpb25BcGlLZXksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKGV2b2x1dGlvblJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBldm9sdXRpb25EYXRhID0gYXdhaXQgZXZvbHV0aW9uUmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZSBjb25lY3RhZG8gbmEgRXZvbHV0aW9uIEFQSSwgYXR1YWxpemFyIG5vIGJhbmNvXG4gICAgICAgICAgICBpZiAoZXZvbHV0aW9uRGF0YS5pbnN0YW5jZT8uc3RhdGUgPT09ICdvcGVuJykge1xuICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAgIC5mcm9tKCd3aGF0c2FwcF9jb25uZWN0aW9ucycpXG4gICAgICAgICAgICAgICAgLnVwZGF0ZSh7IFxuICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICAgIHBob25lX251bWJlcjogZXZvbHV0aW9uRGF0YS5pbnN0YW5jZT8ucGhvbmVOdW1iZXIgfHwgY29ubmVjdGlvbi5waG9uZV9udW1iZXIsXG4gICAgICAgICAgICAgICAgICBsYXN0X3VwZGF0ZWQ6IG5vdy50b0lTT1N0cmluZygpIFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVxKCdpZCcsIGNvbm5lY3Rpb24uaWQpO1xuXG4gICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBxckNvZGU6IG51bGwsXG4gICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGV2b2x1dGlvbkRhdGEuaW5zdGFuY2U/LnBob25lTnVtYmVyIHx8IGNvbm5lY3Rpb24ucGhvbmVfbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgcHJvZmlsZU5hbWU6IGV2b2x1dGlvbkRhdGEuaW5zdGFuY2U/LnByb2ZpbGVOYW1lIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICBhdHRlbXB0c1JlbWFpbmluZzogY29ubmVjdGlvbi5jb25uZWN0aW9uX2F0dGVtcHRzIHx8IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNlIG7Do28gaMOhIFFSIENvZGUgbm8gYmFuY28sIHRlbnRhciBidXNjYXIgbmEgRXZvbHV0aW9uIEFQSVxuICAgICAgICAgIGlmICghY29ubmVjdGlvbi5xcl9jb2RlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBxclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7ZXZvbHV0aW9uQXBpVXJsfS9pbnN0YW5jZS9jb25uZWN0LyR7aW5zdGFuY2VOYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICdhcGlrZXknOiBldm9sdXRpb25BcGlLZXksXG4gICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChxclJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXJEYXRhID0gYXdhaXQgcXJSZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0J1c2NhbmRvIFFSIENvZGUgbmEgRXZvbHV0aW9uIEFQSTonLCB7XG4gICAgICAgICAgICAgICAgICBoYXNCYXNlNjQ6ICEhcXJEYXRhLmJhc2U2NCxcbiAgICAgICAgICAgICAgICAgIGJhc2U2NExlbmd0aDogcXJEYXRhLmJhc2U2ND8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAocXJEYXRhLmJhc2U2NCkge1xuICAgICAgICAgICAgICAgICAgLy8gQXR1YWxpemFyIFFSIENvZGUgbm8gYmFuY29cbiAgICAgICAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIC5mcm9tKCd3aGF0c2FwcF9jb25uZWN0aW9ucycpXG4gICAgICAgICAgICAgICAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgICAgICAgICAgICAgICBxcl9jb2RlOiBxckRhdGEuYmFzZTY0LFxuICAgICAgICAgICAgICAgICAgICAgIGxhc3RfdXBkYXRlZDogbm93LnRvSVNPU3RyaW5nKCkgXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcSgnaWQnLCBjb25uZWN0aW9uLmlkKTtcblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgIHFyQ29kZTogcXJEYXRhLmJhc2U2NCxcbiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGNvbm5lY3Rpb24uc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBjb25uZWN0aW9uLnBob25lX251bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlTmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0c1JlbWFpbmluZzogY29ubmVjdGlvbi5jb25uZWN0aW9uX2F0dGVtcHRzIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChxckVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJybyBhbyBidXNjYXIgUVIgQ29kZSBuYSBFdm9sdXRpb24gQVBJOicsIHFyRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXZvbHV0aW9uRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgRXZvbHV0aW9uIEFQSSBzdGF0dXM6JywgZXZvbHV0aW9uRXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICBxckNvZGU6IGNvbm5lY3Rpb24ucXJfY29kZSxcbiAgICAgICAgc3RhdHVzOiBjb25uZWN0aW9uLnN0YXR1cyxcbiAgICAgICAgcGhvbmVOdW1iZXI6IGNvbm5lY3Rpb24ucGhvbmVfbnVtYmVyLFxuICAgICAgICBwcm9maWxlTmFtZTogbnVsbCxcbiAgICAgICAgYXR0ZW1wdHNSZW1haW5pbmc6IGNvbm5lY3Rpb24uY29ubmVjdGlvbl9hdHRlbXB0cyB8fCAwXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvbm5lY3Rpb24gc3RhdHVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiBSb3V0ZVBhcmFtcykge1xuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2HDp8Ojb1xuICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XG4gICAgaWYgKCFhdXRob3JpemF0aW9uPy5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1Rva2VuIG7Do28gZm9ybmVjaWRvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV07XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGF3YWl0IHZlcmlmeUpXVCh0b2tlbik7XG4gICAgY29uc3QgeyBpbnN0YW5jZU5hbWUgfSA9IHBhcmFtcztcblxuICAgIC8vIENvbmVjdGFyIGFvIFN1cGFiYXNlICAgXG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJyk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwhLFxuICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbiAgICApO1xuXG4gICAgLy8gQnVzY2FyIGUgZGVsZXRhciBjb25leMOjb1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnd2hhdHNhcHBfY29ubmVjdGlvbnMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2luc3RhbmNlX25hbWUnLCBpbnN0YW5jZU5hbWUpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjb25uZWN0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0Vycm8gYW8gZGVsZXRhciBjb25leMOjbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFRlbnRhciBkZWxldGFyIGluc3TDom5jaWEgbmEgRXZvbHV0aW9uIEFQSVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBldm9sdXRpb25BcGlVcmwgPSBwcm9jZXNzLmVudi5FVk9MVVRJT05fQVBJX1VSTDtcbiAgICAgIGNvbnN0IGV2b2x1dGlvbkFwaUtleSA9IHByb2Nlc3MuZW52LkVWT0xVVElPTl9BUElfS0VZO1xuXG4gICAgICBpZiAoZXZvbHV0aW9uQXBpVXJsICYmIGV2b2x1dGlvbkFwaUtleSkge1xuICAgICAgICBhd2FpdCBmZXRjaChgJHtldm9sdXRpb25BcGlVcmx9L2luc3RhbmNlL2RlbGV0ZS8ke2luc3RhbmNlTmFtZX1gLCB7XG4gICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnYXBpa2V5JzogZXZvbHV0aW9uQXBpS2V5LFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXZvbHV0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIEV2b2x1dGlvbiBBUEkgaW5zdGFuY2U6JywgZXZvbHV0aW9uRXJyb3IpO1xuICAgICAgLy8gTsOjbyByZXRvcm5hciBlcnJvIGFxdWkgcG9pcyBhIGNvbmV4w6NvIGrDoSBmb2kgZGVsZXRhZGEgZG8gYmFuY29cbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdDb25leMOjbyBkZWxldGFkYSBjb20gc3VjZXNzbydcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgY29ubmVjdGlvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidmVyaWZ5SldUIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRva2VuIiwic3BsaXQiLCJ1c2VySWQiLCJpbnN0YW5jZU5hbWUiLCJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiZGF0YSIsImNvbm5lY3Rpb24iLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJub3ciLCJEYXRlIiwiZXhwaXJlc0F0IiwiZXhwaXJlc19hdCIsInVwZGF0ZSIsImxhc3RfdXBkYXRlZCIsInRvSVNPU3RyaW5nIiwiaWQiLCJzdWNjZXNzIiwicXJDb2RlIiwicGhvbmVOdW1iZXIiLCJwaG9uZV9udW1iZXIiLCJwcm9maWxlTmFtZSIsImF0dGVtcHRzUmVtYWluaW5nIiwiY29ubmVjdGlvbl9hdHRlbXB0cyIsImV2b2x1dGlvbkFwaVVybCIsIkVWT0xVVElPTl9BUElfVVJMIiwiZXZvbHV0aW9uQXBpS2V5IiwiRVZPTFVUSU9OX0FQSV9LRVkiLCJldm9sdXRpb25SZXNwb25zZSIsImZldGNoIiwib2siLCJldm9sdXRpb25EYXRhIiwiaW5zdGFuY2UiLCJzdGF0ZSIsInFyX2NvZGUiLCJxclJlc3BvbnNlIiwibWV0aG9kIiwicXJEYXRhIiwiY29uc29sZSIsImxvZyIsImhhc0Jhc2U2NCIsImJhc2U2NCIsImJhc2U2NExlbmd0aCIsImxlbmd0aCIsInFyRXJyb3IiLCJ3YXJuIiwiZXZvbHV0aW9uRXJyb3IiLCJERUxFVEUiLCJkZWxldGUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user-connection-status/[instanceName]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   removeAuthCookie: () => (/* binding */ removeAuthCookie),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _repositories_user_repository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/repositories/user.repository */ \"(rsc)/./src/repositories/user.repository.ts\");\n\n\n\nasync function getCurrentUser() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = cookieStore.get(\"auth-token\")?.value;\n        if (!token) {\n            return null;\n        }\n        const jwtSecret = \"ylewgpweougwepygweoigfwapefygweupfo9ig7wrqoFELDGSAYQWQO\";\n        if (!jwtSecret) {\n            return null;\n        }\n        const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, jwtSecret);\n        if (!payload?.userId) {\n            return null;\n        }\n        const user = await _repositories_user_repository__WEBPACK_IMPORTED_MODULE_2__.userRepository.findById(payload.userId);\n        if (!user || !user.ativo || !user.email_verificado) {\n            return null;\n        }\n        return user;\n    } catch (error) {\n        console.error(\"Erro ao obter usu\\xe1rio atual:\", error);\n        return null;\n    }\n}\nasync function isAuthenticated() {\n    const user = await getCurrentUser();\n    return !!user;\n}\nasync function requireAuth() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Usu\\xe1rio n\\xe3o autenticado\");\n    }\n    return user;\n}\nasync function setAuthCookie(token) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.set(\"auth-token\", token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"strict\",\n        maxAge: 60 * 60 * 24\n    });\n}\nasync function removeAuthCookie() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    cookieStore.delete(\"auth-token\");\n}\nfunction verifyJWT(token) {\n    const jwtSecret = \"ylewgpweougwepygweoigfwapefygweupfo9ig7wrqoFELDGSAYQWQO\";\n    if (!jwtSecret) {\n        throw new Error(\"JWT_SECRET n\\xe3o configurado\");\n    }\n    try {\n        const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, jwtSecret);\n        if (!payload?.userId || !payload?.email) {\n            throw new Error(\"Token inv\\xe1lido\");\n        }\n        return {\n            userId: payload.userId,\n            email: payload.email\n        };\n    } catch (error) {\n        throw new Error(\"Token inv\\xe1lido ou expirado\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF1QztBQUNSO0FBQ2lDO0FBR3pELGVBQWVHO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxjQUFjLE1BQU1KLHFEQUFPQTtRQUNqQyxNQUFNSyxRQUFRRCxZQUFZRSxHQUFHLENBQUMsZUFBZUM7UUFFN0MsSUFBSSxDQUFDRixPQUFPO1lBQ1YsT0FBTztRQUNUO1FBRUEsTUFBTUcsWUFBWUMseURBQXNCO1FBQ3hDLElBQUksQ0FBQ0QsV0FBVztZQUNkLE9BQU87UUFDVDtRQUVBLE1BQU1JLFVBQVVYLDBEQUFVLENBQUNJLE9BQU9HO1FBRWxDLElBQUksQ0FBQ0ksU0FBU0UsUUFBUTtZQUNwQixPQUFPO1FBQ1Q7UUFFQSxNQUFNQyxPQUFPLE1BQU1iLHlFQUFjQSxDQUFDYyxRQUFRLENBQUNKLFFBQVFFLE1BQU07UUFFekQsSUFBSSxDQUFDQyxRQUFRLENBQUNBLEtBQUtFLEtBQUssSUFBSSxDQUFDRixLQUFLRyxnQkFBZ0IsRUFBRTtZQUNsRCxPQUFPO1FBQ1Q7UUFFQSxPQUFPSDtJQUNULEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsbUNBQWdDQTtRQUM5QyxPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVFO0lBQ3BCLE1BQU1OLE9BQU8sTUFBTVo7SUFDbkIsT0FBTyxDQUFDLENBQUNZO0FBQ1g7QUFFTyxlQUFlTztJQUNwQixNQUFNUCxPQUFPLE1BQU1aO0lBRW5CLElBQUksQ0FBQ1ksTUFBTTtRQUNULE1BQU0sSUFBSVEsTUFBTTtJQUNsQjtJQUVBLE9BQU9SO0FBQ1Q7QUFFTyxlQUFlUyxjQUFjbkIsS0FBYTtJQUMvQyxNQUFNRCxjQUFjLE1BQU1KLHFEQUFPQTtJQUNqQ0ksWUFBWXFCLEdBQUcsQ0FBQyxjQUFjcEIsT0FBTztRQUNuQ3FCLFVBQVU7UUFDVkMsUUFBUWxCLGtCQUF5QjtRQUNqQ21CLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUs7SUFDcEI7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE1BQU0xQixjQUFjLE1BQU1KLHFEQUFPQTtJQUNqQ0ksWUFBWTJCLE1BQU0sQ0FBQztBQUNyQjtBQUVPLFNBQVNDLFVBQVUzQixLQUFhO0lBQ3JDLE1BQU1HLFlBQVlDLHlEQUFzQjtJQUN4QyxJQUFJLENBQUNELFdBQVc7UUFDZCxNQUFNLElBQUllLE1BQU07SUFDbEI7SUFFQSxJQUFJO1FBQ0YsTUFBTVgsVUFBVVgsMERBQVUsQ0FBQ0ksT0FBT0c7UUFFbEMsSUFBSSxDQUFDSSxTQUFTRSxVQUFVLENBQUNGLFNBQVNxQixPQUFPO1lBQ3ZDLE1BQU0sSUFBSVYsTUFBTTtRQUNsQjtRQUVBLE9BQU87WUFDTFQsUUFBUUYsUUFBUUUsTUFBTTtZQUN0Qm1CLE9BQU9yQixRQUFRcUIsS0FBSztRQUN0QjtJQUNGLEVBQUUsT0FBT2QsT0FBTztRQUNkLE1BQU0sSUFBSUksTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgdXNlclJlcG9zaXRvcnkgfSBmcm9tICdAL3JlcG9zaXRvcmllcy91c2VyLnJlcG9zaXRvcnknO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ0AvdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoLXRva2VuJyk/LnZhbHVlO1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgand0U2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVDtcbiAgICBpZiAoIWp3dFNlY3JldCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IGp3dC52ZXJpZnkodG9rZW4sIGp3dFNlY3JldCkgYXMgYW55O1xuICAgIFxuICAgIGlmICghcGF5bG9hZD8udXNlcklkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlclJlcG9zaXRvcnkuZmluZEJ5SWQocGF5bG9hZC51c2VySWQpO1xuICAgIFxuICAgIGlmICghdXNlciB8fCAhdXNlci5hdGl2byB8fCAhdXNlci5lbWFpbF92ZXJpZmljYWRvKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIG9idGVyIHVzdcOhcmlvIGF0dWFsOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcbiAgcmV0dXJuICEhdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKCk6IFByb21pc2U8VXNlcj4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcbiAgXG4gIGlmICghdXNlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignVXN1w6FyaW8gbsOjbyBhdXRlbnRpY2FkbycpO1xuICB9XG5cbiAgcmV0dXJuIHVzZXI7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRBdXRoQ29va2llKHRva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gIGNvb2tpZVN0b3JlLnNldCgnYXV0aC10b2tlbicsIHRva2VuLCB7XG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIHNhbWVTaXRlOiAnc3RyaWN0JyxcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCwgLy8gMjQgaG9yYXNcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVBdXRoQ29va2llKCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgY29va2llU3RvcmUuZGVsZXRlKCdhdXRoLXRva2VuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlKV1QodG9rZW46IHN0cmluZyk6IHsgdXNlcklkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmcgfSB7XG4gIGNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XG4gIGlmICghand0U2VjcmV0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIG7Do28gY29uZmlndXJhZG8nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IGp3dC52ZXJpZnkodG9rZW4sIGp3dFNlY3JldCkgYXMgYW55O1xuICAgIFxuICAgIGlmICghcGF5bG9hZD8udXNlcklkIHx8ICFwYXlsb2FkPy5lbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb2tlbiBpbnbDoWxpZG8nKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcklkOiBwYXlsb2FkLnVzZXJJZCxcbiAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rva2VuIGludsOhbGlkbyBvdSBleHBpcmFkbycpO1xuICB9XG59Il0sIm5hbWVzIjpbImNvb2tpZXMiLCJqd3QiLCJ1c2VyUmVwb3NpdG9yeSIsImdldEN1cnJlbnRVc2VyIiwiY29va2llU3RvcmUiLCJ0b2tlbiIsImdldCIsInZhbHVlIiwiand0U2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJwYXlsb2FkIiwidmVyaWZ5IiwidXNlcklkIiwidXNlciIsImZpbmRCeUlkIiwiYXRpdm8iLCJlbWFpbF92ZXJpZmljYWRvIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNBdXRoZW50aWNhdGVkIiwicmVxdWlyZUF1dGgiLCJFcnJvciIsInNldEF1dGhDb29raWUiLCJzZXQiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwicmVtb3ZlQXV0aENvb2tpZSIsImRlbGV0ZSIsInZlcmlmeUpXVCIsImVtYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   databaseService: () => (/* binding */ databaseService)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://bxhgjurnibfcbcxqxmsb.supabase.co\";\nconst supabaseServiceKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4aGdqdXJuaWJmY2JjeHF4bXNiIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTM4MTQzMCwiZXhwIjoyMDY2OTU3NDMwfQ.ISSpFu9T01tI4EWIAbgNrjhr6sYnQbjrHliW7d1XrMA\";\nclass DatabaseService {\n    constructor(){\n        this.supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n    }\n    async query(text, params) {\n        try {\n            const { data, error } = await this.supabase.rpc(\"execute_sql\", {\n                query: text,\n                parameters: params || []\n            });\n            if (error) {\n                throw new Error(`Database query error: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Database query error:\", error);\n            throw error;\n        }\n    }\n    async queryOne(text, params) {\n        const results = await this.query(text, params);\n        return results.length > 0 ? results[0] : null;\n    }\n    async transaction(callback) {\n        return callback(this.supabase);\n    }\n    getClient() {\n        return this.supabase;\n    }\n}\nconst databaseService = new DatabaseService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBR3JELE1BQU1DLGNBQWNDLDBDQUF3QjtBQUM1QyxNQUFNRyxxQkFBcUJILDZOQUFxQztBQUVoRSxNQUFNSztJQUdKQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxRQUFRLEdBQUdULG1FQUFZQSxDQUFDQyxhQUFhSSxvQkFBb0I7WUFDNURLLE1BQU07Z0JBQ0pDLGtCQUFrQjtnQkFDbEJDLGdCQUFnQjtZQUNsQjtRQUNGO0lBQ0Y7SUFHQSxNQUFNQyxNQUFTQyxJQUFZLEVBQUVDLE1BQWMsRUFBZ0I7UUFDekQsSUFBSTtZQUNGLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQ1IsUUFBUSxDQUFDUyxHQUFHLENBQUMsZUFBZTtnQkFDN0RMLE9BQU9DO2dCQUNQSyxZQUFZSixVQUFVLEVBQUU7WUFDMUI7WUFFQSxJQUFJRSxPQUFPO2dCQUNULE1BQU0sSUFBSUcsTUFBTSxDQUFDLHNCQUFzQixFQUFFSCxNQUFNSSxPQUFPLENBQUMsQ0FBQztZQUMxRDtZQUVBLE9BQU9MLFFBQVEsRUFBRTtRQUNuQixFQUFFLE9BQU9DLE9BQU87WUFDZEssUUFBUUwsS0FBSyxDQUFDLHlCQUF5QkE7WUFDdkMsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTU0sU0FBWVQsSUFBWSxFQUFFQyxNQUFjLEVBQXFCO1FBQ2pFLE1BQU1TLFVBQVUsTUFBTSxJQUFJLENBQUNYLEtBQUssQ0FBSUMsTUFBTUM7UUFDMUMsT0FBT1MsUUFBUUMsTUFBTSxHQUFHLElBQUlELE9BQU8sQ0FBQyxFQUFFLEdBQUc7SUFDM0M7SUFFQSxNQUFNRSxZQUFlQyxRQUFxQyxFQUFjO1FBQ3RFLE9BQU9BLFNBQVMsSUFBSSxDQUFDbEIsUUFBUTtJQUMvQjtJQUVBbUIsWUFBWTtRQUNWLE9BQU8sSUFBSSxDQUFDbkIsUUFBUTtJQUN0QjtBQUNGO0FBRU8sTUFBTW9CLGtCQUFrQixJQUFJdEIsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRsYXMtYXV0aC8uL3NyYy9saWIvZGF0YWJhc2UudHM/YzFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgSURhdGFiYXNlU2VydmljZSB9IGZyb20gJ0AvdHlwZXMvc2VydmljZXMnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZITtcblxuY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIGltcGxlbWVudHMgSURhdGFiYXNlU2VydmljZSB7XG4gIHByaXZhdGUgc3VwYWJhc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XG4gICAgICBhdXRoOiB7XG4gICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgYXN5bmMgcXVlcnk8VD4odGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSk6IFByb21pc2U8VFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2UucnBjKCdleGVjdXRlX3NxbCcsIHtcbiAgICAgICAgcXVlcnk6IHRleHQsXG4gICAgICAgIHBhcmFtZXRlcnM6IHBhcmFtcyB8fCBbXVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGFiYXNlIHF1ZXJ5IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWVyeU9uZTxUPih0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnF1ZXJ5PFQ+KHRleHQsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF0gOiBudWxsO1xuICB9XG5cbiAgYXN5bmMgdHJhbnNhY3Rpb248VD4oY2FsbGJhY2s6IChjbGllbnQ6IGFueSkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBjYWxsYmFjayh0aGlzLnN1cGFiYXNlKTtcbiAgfVxuXG4gIGdldENsaWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdXBhYmFzZTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGF0YWJhc2VTZXJ2aWNlID0gbmV3IERhdGFiYXNlU2VydmljZSgpOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiRGF0YWJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJzdXBhYmFzZSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJkYXRhIiwiZXJyb3IiLCJycGMiLCJwYXJhbWV0ZXJzIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsInF1ZXJ5T25lIiwicmVzdWx0cyIsImxlbmd0aCIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJnZXRDbGllbnQiLCJkYXRhYmFzZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/repositories/user.repository.ts":
/*!*********************************************!*\
  !*** ./src/repositories/user.repository.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserRepository: () => (/* binding */ UserRepository),\n/* harmony export */   userRepository: () => (/* binding */ userRepository)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./src/lib/database.ts\");\n\nclass UserRepository {\n    async create(data) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").insert([\n            {\n                nome: data.nome,\n                email: data.email,\n                senha_hash: data.senha_hash,\n                email_verificado: false,\n                ativo: true\n            }\n        ]).select().single();\n        if (error) {\n            throw new Error(`Erro ao criar usuário: ${error.message}`);\n        }\n        return user;\n    }\n    async findByEmail(email) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").select(\"*\").eq(\"email\", email).single();\n        if (error && error.code !== \"PGRST116\") {\n            throw new Error(`Erro ao buscar usuário: ${error.message}`);\n        }\n        return user || null;\n    }\n    async findById(id) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").select(\"*\").eq(\"id\", id).single();\n        if (error && error.code !== \"PGRST116\") {\n            throw new Error(`Erro ao buscar usuário: ${error.message}`);\n        }\n        return user || null;\n    }\n    async update(id, data) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").update({\n            ...data,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id).select().single();\n        if (error) {\n            throw new Error(`Erro ao atualizar usuário: ${error.message}`);\n        }\n        return user;\n    }\n    async updatePassword(id, senha_hash) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { error } = await supabase.from(\"usuario\").update({\n            senha_hash,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Erro ao atualizar senha: ${error.message}`);\n        }\n    }\n    async verifyEmail(id) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { error } = await supabase.from(\"usuario\").update({\n            email_verificado: true,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Erro ao verificar email: ${error.message}`);\n        }\n    }\n    async updateLastAccess(id) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { error } = await supabase.from(\"usuario\").update({\n            ultimo_acesso: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Erro ao atualizar último acesso: ${error.message}`);\n        }\n    }\n    async setTrialPeriod(id) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const dataInicio = new Date();\n        const dataFim = new Date();\n        dataFim.setDate(dataFim.getDate() + 7);\n        const { error } = await supabase.from(\"usuario\").update({\n            data_inicio_plano: dataInicio.toISOString(),\n            data_fim_plano: dataFim.toISOString(),\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Erro ao definir período de trial: ${error.message}`);\n        }\n    }\n    async updateProfile(id, data) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").update({\n            ...data,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id).select().single();\n        if (error) {\n            throw new Error(`Erro ao atualizar perfil: ${error.message}`);\n        }\n        return user;\n    }\n    async completeProfile(id, profileData) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").update({\n            ...profileData,\n            perfil_completo: true,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id).select().single();\n        if (error) {\n            throw new Error(`Erro ao completar perfil: ${error.message}`);\n        }\n        return user;\n    }\n    async checkProfileComplete(id) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { data: user, error } = await supabase.from(\"usuario\").select(\"perfil_completo\").eq(\"id\", id).single();\n        if (error) {\n            throw new Error(`Erro ao verificar perfil: ${error.message}`);\n        }\n        return user?.perfil_completo || false;\n    }\n    async setBankingAccountId(id, bankingAccountId) {\n        const supabase = _lib_database__WEBPACK_IMPORTED_MODULE_0__.databaseService.getClient();\n        const { error } = await supabase.from(\"usuario\").update({\n            conta_bancaria_id: bankingAccountId,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", id);\n        if (error) {\n            throw new Error(`Erro ao definir conta bancária: ${error.message}`);\n        }\n    }\n}\nconst userRepository = new UserRepository();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvcmVwb3NpdG9yaWVzL3VzZXIucmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFFaUQ7QUFFMUMsTUFBTUM7SUFDWCxNQUFNQyxPQUFPQyxJQUE2QyxFQUFpQjtRQUN6RSxNQUFNQyxXQUFXSiwwREFBZUEsQ0FBQ0ssU0FBUztRQUUxQyxNQUFNLEVBQUVGLE1BQU1HLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUgsU0FDakNJLElBQUksQ0FBQyxXQUNMQyxNQUFNLENBQUM7WUFBQztnQkFDUEMsTUFBTVAsS0FBS08sSUFBSTtnQkFDZkMsT0FBT1IsS0FBS1EsS0FBSztnQkFDakJDLFlBQVlULEtBQUtTLFVBQVU7Z0JBQzNCQyxrQkFBa0I7Z0JBQ2xCQyxPQUFPO1lBQ1Q7U0FBRSxFQUNEQyxNQUFNLEdBQ05DLE1BQU07UUFFVCxJQUFJVCxPQUFPO1lBQ1QsTUFBTSxJQUFJVSxNQUFNLENBQUMsdUJBQXVCLEVBQUVWLE1BQU1XLE9BQU8sQ0FBQyxDQUFDO1FBQzNEO1FBRUEsT0FBT1o7SUFDVDtJQUVBLE1BQU1hLFlBQVlSLEtBQWEsRUFBd0I7UUFDckQsTUFBTVAsV0FBV0osMERBQWVBLENBQUNLLFNBQVM7UUFFMUMsTUFBTSxFQUFFRixNQUFNRyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQ2pDSSxJQUFJLENBQUMsV0FDTE8sTUFBTSxDQUFDLEtBQ1BLLEVBQUUsQ0FBQyxTQUFTVCxPQUNaSyxNQUFNO1FBRVQsSUFBSVQsU0FBU0EsTUFBTWMsSUFBSSxLQUFLLFlBQVk7WUFDdEMsTUFBTSxJQUFJSixNQUFNLENBQUMsd0JBQXdCLEVBQUVWLE1BQU1XLE9BQU8sQ0FBQyxDQUFDO1FBQzVEO1FBRUEsT0FBT1osUUFBUTtJQUNqQjtJQUVBLE1BQU1nQixTQUFTQyxFQUFVLEVBQXdCO1FBQy9DLE1BQU1uQixXQUFXSiwwREFBZUEsQ0FBQ0ssU0FBUztRQUUxQyxNQUFNLEVBQUVGLE1BQU1HLElBQUksRUFB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QWVBLENBQUNLLFNBQVM7UUFFMUMsTUFBTSxFQUFFRixNQUFNRyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQ2pDSSxJQUFJLENBQUMsV0FDTE8sTUFBTSxDQUFDLG1CQUNQSyxFQUFFLENBQUMsTUFBTUcsSUFDVFAsTUFBTTtRQUVULElBQUlULE9BQU87WUFDVCxNQUFNLElBQUlVLE1BQU0sQ0FBQywwQkFBMEIsRUFBRVYsTUFBTVcsT0FBTyxDQUFDLENBQUM7UUFDOUQ7UUFFQSxPQUFPWixNQUFNb0MsbUJBQW1CO0lBQ2xDO0lBRUEsTUFBTUUsb0JBQW9CckIsRUFBVSxFQUFFc0IsZ0JBQXdCLEVBQWlCO1FBQzdFLE1BQU16QyxXQUFXSiwwREFBZUEsQ0FBQ0ssU0FBUztRQUUxQyxNQUFNLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQ3JCSSxJQUFJLENBQUMsV0FDTGdCLE1BQU0sQ0FBQztZQUNOc0IsbUJBQW1CRDtZQUNuQnBCLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUNwQyxHQUNDUCxFQUFFLENBQUMsTUFBTUc7UUFFWixJQUFJaEIsT0FBTztZQUNULE1BQU0sSUFBSVUsTUFBTSxDQUFDLGdDQUFnQyxFQUFFVixNQUFNVyxPQUFPLENBQUMsQ0FBQztRQUNwRTtJQUNGO0FBQ0Y7QUFFTyxNQUFNNkIsaUJBQWlCLElBQUk5QyxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdGxhcy1hdXRoLy4vc3JjL3JlcG9zaXRvcmllcy91c2VyLnJlcG9zaXRvcnkudHM/YmVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyLCBDcmVhdGVVc2VyRGF0YSwgVXNlclByb2ZpbGVEYXRhLCBVcGRhdGVVc2VyUHJvZmlsZURhdGEgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IElVc2VyUmVwb3NpdG9yeSB9IGZyb20gJ0AvdHlwZXMvc2VydmljZXMnO1xuaW1wb3J0IHsgZGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgVXNlclJlcG9zaXRvcnkgaW1wbGVtZW50cyBJVXNlclJlcG9zaXRvcnkge1xuICBhc3luYyBjcmVhdGUoZGF0YTogQ3JlYXRlVXNlckRhdGEgJiB7IHNlbmhhX2hhc2g6IHN0cmluZyB9KTogUHJvbWlzZTxVc2VyPiB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBkYXRhYmFzZVNlcnZpY2UuZ2V0Q2xpZW50KCk7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c3VhcmlvJylcbiAgICAgIC5pbnNlcnQoW3tcbiAgICAgICAgbm9tZTogZGF0YS5ub21lLFxuICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgc2VuaGFfaGFzaDogZGF0YS5zZW5oYV9oYXNoLFxuICAgICAgICBlbWFpbF92ZXJpZmljYWRvOiBmYWxzZSxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9XSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm8gYW8gY3JpYXIgdXN1w6FyaW86ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIGFzeW5jIGZpbmRCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBkYXRhYmFzZVNlcnZpY2UuZ2V0Q2xpZW50KCk7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c3VhcmlvJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyBhbyBidXNjYXIgdXN1w6FyaW86ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlciB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHVzZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIGFvIGJ1c2NhciB1c3XDoXJpbzogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyIHx8IG51bGw7XG4gIH1cblxuICBhc3luYyB1cGRhdGUoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxVc2VyPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZGF0YWJhc2VTZXJ2aWNlLmdldENsaWVudCgpO1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YTogdXNlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXN1YXJpbycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyBhbyBhdHVhbGl6YXIgdXN1w6FyaW86ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhc3N3b3JkKGlkOiBzdHJpbmcsIHNlbmhhX2hhc2g6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZGF0YWJhc2VTZXJ2aWNlLmdldENsaWVudCgpO1xuICAgIFxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXN1YXJpbycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgc2VuaGFfaGFzaCxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIGFvIGF0dWFsaXphciBzZW5oYTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHZlcmlmeUVtYWlsKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIGVtYWlsX3ZlcmlmaWNhZG86IHRydWUsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyBhbyB2ZXJpZmljYXIgZW1haWw6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVMYXN0QWNjZXNzKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIHVsdGltb19hY2Vzc286IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIGFvIGF0dWFsaXphciDDumx0aW1vIGFjZXNzbzogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFRyaWFsUGVyaW9kKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoKTtcbiAgICBkYXRhRmltLnNldERhdGUoZGF0YUZpbS5nZXREYXRlKCkgKyA3KTtcbiAgICBcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIGRhdGFfaW5pY2lvX3BsYW5vOiBkYXRhSW5pY2lvLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGRhdGFfZmltX3BsYW5vOiBkYXRhRmltLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyBhbyBkZWZpbmlyIHBlcsOtb2RvIGRlIHRyaWFsOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUHJvZmlsZShpZDogc3RyaW5nLCBkYXRhOiBVcGRhdGVVc2VyUHJvZmlsZURhdGEpOiBQcm9taXNlPFVzZXI+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHVzZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm8gYW8gYXR1YWxpemFyIHBlcmZpbDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgYXN5bmMgY29tcGxldGVQcm9maWxlKGlkOiBzdHJpbmcsIHByb2ZpbGVEYXRhOiBVc2VyUHJvZmlsZURhdGEpOiBQcm9taXNlPFVzZXI+IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGRhdGFiYXNlU2VydmljZS5nZXRDbGllbnQoKTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHVzZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzdWFyaW8nKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIC4uLnByb2ZpbGVEYXRhLFxuICAgICAgICBwZXJmaWxfY29tcGxldG86IHRydWUsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm8gYW8gY29tcGxldGFyIHBlcmZpbDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tQcm9maWxlQ29tcGxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZGF0YWJhc2VTZXJ2aWNlLmdldENsaWVudCgpO1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YTogdXNlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXN1YXJpbycpXG4gICAgICAuc2VsZWN0KCdwZXJmaWxfY29tcGxldG8nKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm8gYW8gdmVyaWZpY2FyIHBlcmZpbDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyPy5wZXJmaWxfY29tcGxldG8gfHwgZmFsc2U7XG4gIH1cblxuICBhc3luYyBzZXRCYW5raW5nQWNjb3VudElkKGlkOiBzdHJpbmcsIGJhbmtpbmdBY2NvdW50SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZGF0YWJhc2VTZXJ2aWNlLmdldENsaWVudCgpO1xuICAgIFxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXN1YXJpbycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgY29udGFfYmFuY2FyaWFfaWQ6IGJhbmtpbmdBY2NvdW50SWQsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJybyBhbyBkZWZpbmlyIGNvbnRhIGJhbmPDoXJpYTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXNlclJlcG9zaXRvcnkgPSBuZXcgVXNlclJlcG9zaXRvcnkoKTsiXSwibmFtZXMiOlsiZGF0YWJhc2VTZXJ2aWNlIiwiVXNlclJlcG9zaXRvcnkiLCJjcmVhdGUiLCJkYXRhIiwic3VwYWJhc2UiLCJnZXRDbGllbnQiLCJ1c2VyIiwiZXJyb3IiLCJmcm9tIiwiaW5zZXJ0Iiwibm9tZSIsImVtYWlsIiwic2VuaGFfaGFzaCIsImVtYWlsX3ZlcmlmaWNhZG8iLCJhdGl2byIsInNlbGVjdCIsInNpbmdsZSIsIkVycm9yIiwibWVzc2FnZSIsImZpbmRCeUVtYWlsIiwiZXEiLCJjb2RlIiwiZmluZEJ5SWQiLCJpZCIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVQYXNzd29yZCIsInZlcmlmeUVtYWlsIiwidXBkYXRlTGFzdEFjY2VzcyIsInVsdGltb19hY2Vzc28iLCJzZXRUcmlhbFBlcmlvZCIsImRhdGFJbmljaW8iLCJkYXRhRmltIiwic2V0RGF0ZSIsImdldERhdGUiLCJkYXRhX2luaWNpb19wbGFubyIsImRhdGFfZmltX3BsYW5vIiwidXBkYXRlUHJvZmlsZSIsImNvbXBsZXRlUHJvZmlsZSIsInByb2ZpbGVEYXRhIiwicGVyZmlsX2NvbXBsZXRvIiwiY2hlY2tQcm9maWxlQ29tcGxldGUiLCJzZXRCYW5raW5nQWNjb3VudElkIiwiYmFua2luZ0FjY291bnRJZCIsImNvbnRhX2JhbmNhcmlhX2lkIiwidXNlclJlcG9zaXRvcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/repositories/user.repository.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/next","vendor-chunks/ws","vendor-chunks/semver","vendor-chunks/whatwg-url","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&page=%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-connection-status%2F%5BinstanceName%5D%2Froute.ts&appDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpedrotorrezani%2FDocuments%2FProgramacao%2Fatlas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();