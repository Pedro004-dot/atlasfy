Estrutura do nosso banco de dados, tabela , colunas , tipo_coluna


### 1. agent_control
- `numero` (text, NOT NULL, PK)
- `agente_ativo` (boolean, NOT NULL, default: true)
- `datehora` (timestamptz, NOT NULL)
- `ignorar_automacao` (boolean, NULL)

### 2. empresa
- `id` (uuid, NOT NULL, PK, default: auth.uid())
- `nome` (text, NULL)
- `cnpj` (text, NULL, UNIQUE)
- `telefone` (text, NOT NULL, UNIQUE)
- `endereco` (text, NULL)
- `bairro` (text, NULL)
- `cidade` (text, NULL)
- `estado` (text, NULL)
- `cep` (text, NULL)
- `link_google_maps` (text, NULL)
- `formas_pagamento` (text[], NULL)
- `nome_atendente` (text, NULL)
- `genero_atendente` (text, NULL)
- `horario_funcionamento` (jsonb, NULL)
- `descricao` (text, NULL)
- `mensagemBoasVindas` (text, NULL)
- `numeroSuporte` (text, NULL)
- `asaas_subconta_id` (varchar, NULL)
- `asaas_api_key` (text, NULL)
- `asaas_wallet_id` (varchar, NULL)
- `asaas_account_agency` (varchar, NULL)
- `asaas_account_number` (varchar, NULL)
- `asaas_status` (varchar, NULL, default: 'pendente')
- `asaas_ambiente` (varchar, NULL, default: 'sandbox')
- `asaas_created_at` (timestamp, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 3. cliente
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `nome` (text, NULL)
- `telefone` (text, NULL, UNIQUE)
- `asaas_customer_id` (varchar, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 4. plano
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `nome` (text, NOT NULL, UNIQUE)
- `descricao` (text, NULL)
- `preco_mensal` (numeric, NULL)
- `preco_anual` (numeric, NULL)
- `limite_empresas` (integer, NULL)
- `limite_mensagens` (integer, NULL)
- `recursos` (jsonb, NULL)
- `ativo` (boolean, NOT NULL, default: true)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 5. usuario
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `nome` (text, NOT NULL)
- `email` (text, NOT NULL, UNIQUE)
- `senha_hash` (text, NULL)
- `telefone` (text, NULL)
- `email_verificado` (boolean, NOT NULL, default: false)
- `ativo` (boolean, NOT NULL, default: true)
- `plano_id` (uuid, NULL, FK -> plano.id)
- `data_inicio_plano` (timestamp, NULL)
- `data_fim_plano` (timestamp, NULL)
- `ultimo_acesso` (timestamp, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 6. usuario_empresa
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `usuario_id` (uuid, NOT NULL, FK -> usuario.id)
- `empresa_id` (uuid, NOT NULL, FK -> empresa.id)
- `papel` (text, NOT NULL, default: 'proprietario')
- `ativo` (boolean, NOT NULL, default: true)
- `permissoes` (jsonb, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 7. cliente_empresa
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `cliente_id` (uuid, NOT NULL, FK -> cliente.id)
- `empresa_id` (uuid, NOT NULL, FK -> empresa.id)
- `status` (text, NOT NULL, default: 'ativo')
- `primeiro_contato` (timestamp, NULL, default: now())
- `ultimo_contato` (timestamp, NULL)
- `total_mensagens` (integer, NOT NULL, default: 0)
- `observacoes` (text, NULL)
- `tags` (text[], NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 8. produto
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `empresa_id` (uuid, NOT NULL, FK -> empresa.id)
- `nome` (text, NOT NULL)
- `descricao` (text, NULL)
- `preco` (numeric, NOT NULL)
- `quantidade_estoque` (integer, NOT NULL, default: 0)
- `ativo` (boolean, NOT NULL, default: true)
- `palavras_chave` (text[], NULL)
- `imagens` (text[], NULL)
- `video_url` (text, NULL)
- `promocao` (boolean, NOT NULL, default: false)
- `preco_promocional` (numeric, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 9. pedido
- `id` (uuid, NOT NULL, PK, default: uuid_generate_v4())
- `empresa_id` (uuid, NOT NULL, FK -> empresa.id)
- `cliente_id` (uuid, NOT NULL, FK -> cliente.id)
- `produto_id` (uuid, NOT NULL, FK -> produto.id)
- `quantidade` (integer, NOT NULL, default: 1)
- `preco_unitario` (numeric, NOT NULL)
- `valor_total` (numeric, NOT NULL)
- `forma_pagamento` (text, NULL)
- `link_pagamento` (text, NULL)
- `status_pagamento` (text, NOT NULL, default: 'pendente')
- `status_pedido` (text, NOT NULL, default: 'novo')
- `endereco_entrega` (text, NULL)
- `observacoes` (text, NULL)
- `mensagem_id` (text, NULL)
- `created_at` (timestamp, NULL, default: now())
- `updated_at` (timestamp, NULL, default: now())

### 10. n8n_chat_histories
- `id` (integer, NOT NULL, PK, default: nextval('n8n_chat_histories_id_seq'))
- `session_id` (varchar, NOT NULL)
- `message` (jsonb, NOT NULL)
